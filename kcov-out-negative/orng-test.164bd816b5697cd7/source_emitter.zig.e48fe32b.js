var data = {lines:[
{"lineNum":"    1","line":"// This file contains the implementation of the Orange compiler\'s C code generator."},
{"lineNum":"    2","line":"// TODO: Make this a context struct (to fix cheat_module)"},
{"lineNum":"    3","line":""},
{"lineNum":"    4","line":"const std = @import(\"std\");"},
{"lineNum":"    5","line":"const ast_ = @import(\"../ast/ast.zig\");"},
{"lineNum":"    6","line":"const Basic_Block = @import(\"../ir/basic-block.zig\");"},
{"lineNum":"    7","line":"const core_ = @import(\"../hierarchy/core.zig\");"},
{"lineNum":"    8","line":"const CFG = @import(\"../ir/cfg.zig\");"},
{"lineNum":"    9","line":"const Emitter = @import(\"emitter.zig\");"},
{"lineNum":"   10","line":"const Interned_String_Set = @import(\"../ir/interned_string_set.zig\");"},
{"lineNum":"   11","line":"const Instruction = @import(\"../ir/instruction.zig\");"},
{"lineNum":"   12","line":"const lval_ = @import(\"../ir/lval.zig\");"},
{"lineNum":"   13","line":"const prelude_ = @import(\"../hierarchy/prelude.zig\");"},
{"lineNum":"   14","line":"const module_ = @import(\"../hierarchy/module.zig\");"},
{"lineNum":"   15","line":"const Span = @import(\"../util/span.zig\");"},
{"lineNum":"   16","line":"const Type_AST = @import(\"../types/type.zig\").Type_AST;"},
{"lineNum":"   17","line":"const Symbol = @import(\"../symbol/symbol.zig\");"},
{"lineNum":"   18","line":""},
{"lineNum":"   19","line":"const Self = @This();"},
{"lineNum":"   20","line":"const HIGHEST_PRECEDENCE = 100;"},
{"lineNum":"   21","line":""},
{"lineNum":"   22","line":"module: *module_.Module,"},
{"lineNum":"   23","line":"/// Interned strings for this module. Referenced when emitting a load_string instruction to retrieve the string information."},
{"lineNum":"   24","line":"module_interned_strings: *const std.AutoArrayHashMap(u32, *Interned_String_Set),"},
{"lineNum":"   25","line":"emitter: Emitter,"},
{"lineNum":"   26","line":"writer: *std.array_list.Managed(u8),"},
{"lineNum":"   27","line":""},
{"lineNum":"   28","line":"pub const CodeGen_Error = error{ WriteFailed, OutOfMemory };"},
{"lineNum":"   29","line":""},
{"lineNum":"   30","line":"pub fn init("},
{"lineNum":"   31","line":"    module: *module_.Module,"},
{"lineNum":"   32","line":"    module_interned_strings: *const std.AutoArrayHashMap(u32, *Interned_String_Set),"},
{"lineNum":"   33","line":"    writer: *std.array_list.Managed(u8),"},
{"lineNum":"   34","line":") Self {","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"   35","line":"    const emitter = Emitter.init(writer);","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   36","line":"    return Self{","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   37","line":"        .module = module,"},
{"lineNum":"   38","line":"        .module_interned_strings = module_interned_strings,"},
{"lineNum":"   39","line":"        .emitter = emitter,"},
{"lineNum":"   40","line":"        .writer = writer,"},
{"lineNum":"   41","line":"    };"},
{"lineNum":"   42","line":"}"},
{"lineNum":"   43","line":""},
{"lineNum":"   44","line":"/// Generates C code for the provided Orange module and writes it to the given writer."},
{"lineNum":"   45","line":"pub fn generate(self: *Self) CodeGen_Error!void {","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"   46","line":"    try self.output_header_include();","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   47","line":"    try self.output_impls();","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   48","line":"    try self.emitter.forall_functions(self, self.module.cfgs.items, \"Monomorphed function declarations\", output_monomprphed_decl);","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   49","line":"    try self.emitter.forall_functions(self, self.module.cfgs.items, \"Monomorphed function definitions\", output_monomprphed_def);","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   50","line":"    try self.emitter.forall_functions(self, self.module.cfgs.items, \"Function definitions\", output_non_monomorphed_def);","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   51","line":"}"},
{"lineNum":"   52","line":""},
{"lineNum":"   53","line":"pub fn output_header_include(self: *Self) CodeGen_Error!void {","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"   54","line":"    try self.writer.print(","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"   55","line":"        \\\\/* Code generated using the Orange compiler http://ornglang.org */"},
{"lineNum":"   56","line":"        \\\\"},
{"lineNum":"   57","line":"        \\\\#include \"{s}-{s}.h\""},
{"lineNum":"   58","line":"        \\\\"},
{"lineNum":"   59","line":"    , .{ self.module.package_name, self.module.name() });","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"   60","line":"}"},
{"lineNum":"   61","line":""},
{"lineNum":"   62","line":"fn output_impls("},
{"lineNum":"   63","line":"    self: *Self,"},
{"lineNum":"   64","line":") CodeGen_Error!void {","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"   65","line":"    var vtable_count: usize = 0;","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   66","line":"    for (self.module.impls.items) |impl| {","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"   67","line":"        if (impl.impl.num_virtual_methods != 0) {","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"   68","line":"            vtable_count += 1;","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"   69","line":"        }"},
{"lineNum":"   70","line":"    }","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"   71","line":""},
{"lineNum":"   72","line":"    if (vtable_count > 0) {","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   73","line":"        // TODO: Count impls that have virtual methods"},
{"lineNum":"   74","line":"        // Do not output header comment if there are no impls!"},
{"lineNum":"   75","line":"        try self.writer.print(\"\\n/* Trait vtable implementations */\\n\", .{});","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"   76","line":"    }"},
{"lineNum":"   77","line":""},
{"lineNum":"   78","line":"    for (self.module.impls.items) |impl| {","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"   79","line":"        if (impl.impl.num_virtual_methods == 0) {","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"   80","line":"            continue;","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"   81","line":"        }"},
{"lineNum":"   82","line":"        const trait = impl.impl.trait.?;","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"   83","line":"        const trait_module = trait.symbol().?.scope.module.?;","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"   84","line":"        try self.writer.print(\"const struct vtable_{s}__{s}__{}_{s} {s}__{s}_{}__vtable = {{\\n\", .{","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"   85","line":"            trait_module.package_name,","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   86","line":"            trait_module.name(),","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   87","line":"            trait.symbol().?.scope.uid,","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"   88","line":"            trait.symbol().?.name,","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"   89","line":"            //"},
{"lineNum":"   90","line":"            self.module.package_name,","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   91","line":"            self.module.name(),","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   92","line":"            impl.scope().?.uid,","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"   93","line":"        });"},
{"lineNum":"   94","line":"        for (impl.impl.method_defs.items) |decl| {","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"   95","line":"            if (!decl.method_decl.is_virtual) {","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"   96","line":"                continue;","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"   97","line":"            }"},
{"lineNum":"   98","line":"            try self.writer.print(\"    .{s} = \", .{decl.method_decl.name.token().data});","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"   99","line":"            try self.emitter.output_symbol(decl.symbol().?);","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  100","line":"            try self.writer.print(\",\\n\", .{});","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  101","line":"        }","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"  102","line":"        try self.writer.print(\"}};\\n\", .{});","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  103","line":"    }","class":"lineNoCov","hits":"0","possible_hits":"4",},
{"lineNum":"  104","line":"}"},
{"lineNum":"  105","line":""},
{"lineNum":"  106","line":"pub fn output_monomprphed_decl(self: *Self, cfg: *CFG) CodeGen_Error!void {","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  107","line":"    if (!cfg.symbol.is_monomorphed) {","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  108","line":"        return;","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  109","line":"    }"},
{"lineNum":"  110","line":"    try self.writer.print(\"static \", .{});","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  111","line":"    try self.emitter.output_function_prototype(cfg);","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  112","line":"    try self.writer.print(\";\\n\", .{});","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  113","line":"}"},
{"lineNum":"  114","line":""},
{"lineNum":"  115","line":"pub fn output_monomprphed_def(self: *Self, cfg: *CFG) CodeGen_Error!void {","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  116","line":"    if (!cfg.symbol.is_monomorphed) {","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  117","line":"        return;","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  118","line":"    }"},
{"lineNum":"  119","line":"    try self.writer.print(\"static \", .{});","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  120","line":"    try self.output_function_definition(cfg);","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  121","line":"}"},
{"lineNum":"  122","line":""},
{"lineNum":"  123","line":"fn output_non_monomorphed_def(self: *Self, cfg: *CFG) CodeGen_Error!void {","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  124","line":"    if (cfg.symbol.is_monomorphed or cfg.symbol.scope.module != self.module) {","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  125","line":"        return;","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  126","line":"    }"},
{"lineNum":"  127","line":"    try self.output_function_definition(cfg);","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  128","line":"}"},
{"lineNum":"  129","line":""},
{"lineNum":"  130","line":"/// Output the definition of a function."},
{"lineNum":"  131","line":"pub fn output_function_definition(self: *Self, cfg: *CFG) CodeGen_Error!void {","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  132","line":"    if (cfg != self.module.cfgs.items[0]) try self.writer.print(\"\\n\", .{});","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  133","line":"    try self.emitter.output_function_prototype(cfg);","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  134","line":"    try self.writer.print(\"\\n{{\\n\", .{});","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  135","line":""},
{"lineNum":"  136","line":"    // Declare local variables"},
{"lineNum":"  137","line":"    for (cfg.symbvers.items) |symbver| {","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"  138","line":"        if (symbver.symbol.expanded_type().sizeof() == 0 or // symbol\'s C type is `void`","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  139","line":"            (symbver.symbol.uses == 0 and symbver.symbol.name[0] != \'_\') // non-bookkeeping symbol is not used","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  140","line":"        ) {"},
{"lineNum":"  141","line":"            continue; // Do not output unit variables","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  142","line":"        }"},
{"lineNum":"  143","line":"        try self.emitter.output_var_decl(symbver.symbol, false);","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  144","line":"    }","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"  145","line":""},
{"lineNum":"  146","line":"    // Mark unused parameters as discarded"},
{"lineNum":"  147","line":"    const param_symbols = cfg.symbol.decl.?.param_symbols();","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"  148","line":"    if (param_symbols != null) {","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  149","line":"        for (param_symbols.?.items) |param| {","class":"lineNoCov","hits":"0","possible_hits":"4",},
{"lineNum":"  150","line":"            // Do this only if they aren\'t discarded in source"},
{"lineNum":"  151","line":"            // Users can discard parameters, however used parameters may also become unused through optimizations"},
{"lineNum":"  152","line":"            if (!param.expanded_type().is_c_void_type() and // unit-typed parameters aren\'t emitted","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  153","line":"                param.uses == 0)","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"  154","line":"            {"},
{"lineNum":"  155","line":"                try self.writer.print(\"    (void)\", .{});","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  156","line":"                try self.emitter.output_symbol(param);","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  157","line":"                try self.writer.print(\";\\n\", .{});","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  158","line":"            }"},
{"lineNum":"  159","line":"        }","class":"lineNoCov","hits":"0","possible_hits":"5",},
{"lineNum":"  160","line":"    }"},
{"lineNum":"  161","line":""},
{"lineNum":"  162","line":"    // Generate the basic-block graph, starting at the init basic block"},
{"lineNum":"  163","line":"    if (cfg.block_graph_head) |block_graph_head| {","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  164","line":"        try self.output_basic_block(cfg, block_graph_head, cfg.return_symbol);","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  165","line":"        cfg.clear_visited_BBs();","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  166","line":"    }"},
{"lineNum":"  167","line":""},
{"lineNum":"  168","line":"    try self.writer.print(\"}}\\n\", .{});","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  169","line":"}"},
{"lineNum":"  170","line":""},
{"lineNum":"  171","line":"pub fn output_main_function(self: *Self) CodeGen_Error!void {","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  172","line":"    if (self.module.entry == null) {","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  173","line":"        return;","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  174","line":"    }"},
{"lineNum":"  175","line":"    const symbol = self.module.entry.?.symbol;","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"  176","line":""},
{"lineNum":"  177","line":"    const codomain = symbol.expanded_type().rhs().expand_identifier();","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  178","line":"    var string_access: []const u8 = \"\";","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  179","line":"    var specifier: ?[]const u8 = null;","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  180","line":"    switch (codomain.*) {","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"  181","line":"        .identifier => {"},
{"lineNum":"  182","line":"            const info = prelude_.info_from_name(codomain.token().data).?;","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  183","line":"            specifier = switch (info.type_kind) {","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"  184","line":"                .boolean, .signed_integer => \"d\","},
{"lineNum":"  185","line":"                .unsigned_integer => \"u\","},
{"lineNum":"  186","line":"                .floating_point => \"f\","},
{"lineNum":"  187","line":"                else => unreachable,","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"  188","line":"            };"},
{"lineNum":"  189","line":"        },"},
{"lineNum":"  190","line":"        .struct_type => |p| if (p.was_slice) {","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  191","line":"            string_access = \"._0\";","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  192","line":"            specifier = \"s\";","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"  193","line":"        },"},
{"lineNum":"  194","line":"        else => {},"},
{"lineNum":"  195","line":"    }"},
{"lineNum":"  196","line":""},
{"lineNum":"  197","line":"    try self.writer.print(","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  198","line":"        \\\\int main(int argc, char *argv[]) {{"},
{"lineNum":"  199","line":"        \\\\"},
{"lineNum":"  200","line":"    , .{});"},
{"lineNum":"  201","line":""},
{"lineNum":"  202","line":"    // TOOD: This won\'t fly in a standalone context"},
{"lineNum":"  203","line":"    const requires_context = symbol.type().function.contexts.items.len > 0;","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  204","line":"    if (requires_context) {","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  205","line":"        try self.emitter.output_type(core_.allocating_context);","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  206","line":"        try self.writer.print(","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  207","line":"            \\\\ allocator_context = {{._0 = {{.data_ptr = (void*)0xAAAAAAAA, .vtable = &std__mem_2__vtable}}}};"},
{"lineNum":"  208","line":"            \\\\"},
{"lineNum":"  209","line":"        , .{});"},
{"lineNum":"  210","line":"    }"},
{"lineNum":"  211","line":""},
{"lineNum":"  212","line":"    if (specifier != null) {","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  213","line":"        try self.writer.print(\"printf(\\\"%{s}{s}\\\", \", .{ if (codomain.sizeof() == 8) \"l\" else \"\", specifier.? });","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  214","line":"        try self.emitter.output_symbol(symbol);","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  215","line":"        try self.writer.print(\"(){s});\", .{string_access});","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  216","line":"    } else {"},
{"lineNum":"  217","line":"        if (codomain.* == .enum_type and codomain.enum_type.from == .@\"error\") {","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  218","line":"            try self.emitter.output_type(codomain);","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  219","line":"            try self.writer.print(\"   retcode = \", .{});","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  220","line":"        }"},
{"lineNum":"  221","line":"        try self.emitter.output_symbol(symbol);","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  222","line":"        if (requires_context) {","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  223","line":"            try self.writer.print(","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  224","line":"                \\\\(&allocator_context);"},
{"lineNum":"  225","line":"                \\\\"},
{"lineNum":"  226","line":"            , .{});"},
{"lineNum":"  227","line":"        } else {"},
{"lineNum":"  228","line":"            try self.writer.print(","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"  229","line":"                \\\\();"},
{"lineNum":"  230","line":"                \\\\"},
{"lineNum":"  231","line":"            , .{});"},
{"lineNum":"  232","line":"        }"},
{"lineNum":"  233","line":"    }"},
{"lineNum":"  234","line":""},
{"lineNum":"  235","line":"    if (codomain.* == .enum_type and codomain.enum_type.from == .@\"error\") {","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  236","line":"        try self.writer.print(","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  237","line":"            \\\\    return retcode.tag;"},
{"lineNum":"  238","line":"            \\\\}}"},
{"lineNum":"  239","line":"            \\\\"},
{"lineNum":"  240","line":"        , .{});"},
{"lineNum":"  241","line":"    } else {"},
{"lineNum":"  242","line":"        try self.writer.print(","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"  243","line":"            \\\\    return 0;"},
{"lineNum":"  244","line":"            \\\\}}"},
{"lineNum":"  245","line":"            \\\\"},
{"lineNum":"  246","line":"        , .{});"},
{"lineNum":"  247","line":"    }"},
{"lineNum":"  248","line":"}"},
{"lineNum":"  249","line":""},
{"lineNum":"  250","line":"/// Outputs the C code for a basic-block in the given control flow graph."},
{"lineNum":"  251","line":"fn output_basic_block("},
{"lineNum":"  252","line":"    self: *Self,"},
{"lineNum":"  253","line":"    cfg: *CFG, // TODO: Accept cfg block graph head"},
{"lineNum":"  254","line":"    start_bb: *Basic_Block,"},
{"lineNum":"  255","line":"    return_symbol: *Symbol,"},
{"lineNum":"  256","line":") CodeGen_Error!void {","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  257","line":"    // FIXME: High Cyclo"},
{"lineNum":"  258","line":"    var bb_queue = std.array_list.Managed(*Basic_Block).init(std.heap.page_allocator); // page alloc ok, immediately deinit\'d","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  259","line":"    defer bb_queue.deinit();","class":"lineNoCov","hits":"0","possible_hits":"16",},
{"lineNum":"  260","line":"    bb_queue.append(start_bb) catch unreachable;","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  261","line":"    start_bb.visited = true;","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  262","line":""},
{"lineNum":"  263","line":"    // Output basic-blocks in BFS order"},
{"lineNum":"  264","line":"    var head: usize = 0;","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  265","line":"    while (head < bb_queue.items.len) {","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  266","line":"        const bb: *Basic_Block = bb_queue.items[head];","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"  267","line":"        head += 1;","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  268","line":""},
{"lineNum":"  269","line":"        const is_head_bb = cfg.block_graph_head != null and cfg.block_graph_head.? == bb;","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  270","line":"        const more_than_one_incoming = bb.number_predecessors > 1;","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  271","line":"        if (!is_head_bb or more_than_one_incoming) {","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  272","line":"            // Do not output a label for a block that is never jumped to (gcc complains)"},
{"lineNum":"  273","line":"            try self.writer.print(\"BB{}:\\n\", .{bb.uid});","class":"lineNoCov","hits":"0","possible_hits":"4",},
{"lineNum":"  274","line":"        }"},
{"lineNum":"  275","line":""},
{"lineNum":"  276","line":"        // Output Instruction instructions for the basic-block"},
{"lineNum":"  277","line":"        for (bb.instructions.items) |instr| {","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"  278","line":"            try self.output_instruction(instr);","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  279","line":"        }","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"  280","line":""},
{"lineNum":"  281","line":"        switch (bb.terminator) {","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  282","line":"            .unconditional => {"},
{"lineNum":"  283","line":"                if (bb.terminator.unconditional) |next| {","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  284","line":"                    if (!next.visited) {","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  285","line":"                        bb_queue.append(next) catch unreachable;","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  286","line":"                        next.visited = true;","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  287","line":"                    }"},
{"lineNum":"  288","line":"                    try self.writer.print(\"    goto BB{};\\n\", .{next.uid});","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  289","line":"                } else {"},
{"lineNum":"  290","line":"                    try self.output_return(return_symbol);","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"  291","line":"                }"},
{"lineNum":"  292","line":"            },"},
{"lineNum":"  293","line":"            .conditional => {"},
{"lineNum":"  294","line":"                // Generate the if"},
{"lineNum":"  295","line":"                try self.writer.print(\"    if (\", .{});","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  296","line":"                try self.output_rvalue(bb.terminator.conditional.condition, HIGHEST_PRECEDENCE);","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  297","line":"                try self.writer.print(\")\\n    {{\\n\", .{});","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  298","line":""},
{"lineNum":"  299","line":"                // Generate the `next` BB"},
{"lineNum":"  300","line":"                if (bb.terminator.conditional.true_target) |next| {","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  301","line":"                    try self.writer.print(\"        goto BB{};\\n    }}\", .{next.uid});","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  302","line":"                    if (!next.visited) {","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  303","line":"                        bb_queue.append(next) catch unreachable;","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  304","line":"                        next.visited = true;","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"  305","line":"                    }"},
{"lineNum":"  306","line":"                } else {"},
{"lineNum":"  307","line":"                    try self.writer.print(\"    \", .{});","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  308","line":"                    try self.output_return(return_symbol);","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  309","line":"                    try self.writer.print(\"    }}\", .{});","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  310","line":"                }"},
{"lineNum":"  311","line":""},
{"lineNum":"  312","line":"                // Generate the `branch` BB if it isn\'t the next one up"},
{"lineNum":"  313","line":"                if (bb.terminator.conditional.false_target) |branch| {","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  314","line":"                    if (!branch.visited) {","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  315","line":"                        bb_queue.append(branch) catch unreachable;","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  316","line":"                        branch.visited = true;","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  317","line":"                    }"},
{"lineNum":"  318","line":"                    try self.writer.print(\"\\n    else\\n    {{\\n        goto BB{};\\n    }}\\n\", .{branch.uid});","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  319","line":"                } else {"},
{"lineNum":"  320","line":"                    try self.writer.print(\"\\n    else\\n    {{\\n    \", .{});","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  321","line":"                    try self.output_return(return_symbol);","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  322","line":"                    try self.writer.print(\"    }}\\n\", .{});","class":"lineNoCov","hits":"0","possible_hits":"4",},
{"lineNum":"  323","line":"                }"},
{"lineNum":"  324","line":"            },"},
{"lineNum":"  325","line":"            .panic => {},"},
{"lineNum":"  326","line":"        }"},
{"lineNum":"  327","line":"    }","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"  328","line":"}"},
{"lineNum":"  329","line":""},
{"lineNum":"  330","line":"/// Outputs the C code for an instruction."},
{"lineNum":"  331","line":"fn output_instruction(self: *Self, instr: *Instruction) CodeGen_Error!void {","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  332","line":"    if (instr.dest != null) {","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  333","line":"        try self.output_lvalue_check(instr.span, instr.dest.?);","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  334","line":"    }"},
{"lineNum":"  335","line":"    if (instr.src1 != null) {","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  336","line":"        try self.output_lvalue_check(instr.span, instr.src1.?);","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  337","line":"    }"},
{"lineNum":"  338","line":"    if (instr.src2 != null) {","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  339","line":"        try self.output_lvalue_check(instr.span, instr.src2.?);","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  340","line":"    }"},
{"lineNum":"  341","line":"    if (instr.data == .lval_list) {","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  342","line":"        for (instr.data.lval_list.items) |lval| {","class":"lineNoCov","hits":"0","possible_hits":"4",},
{"lineNum":"  343","line":"            try self.output_lvalue_check(instr.span, lval);","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  344","line":"        }","class":"lineNoCov","hits":"0","possible_hits":"5",},
{"lineNum":"  345","line":"    }"},
{"lineNum":"  346","line":""},
{"lineNum":"  347","line":"    if (instr.dest != null and instr.dest.?.get_expanded_type().is_c_void_type() and instr.kind != .call and instr.kind != .invoke) {","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  348","line":"        return;","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  349","line":"    }"},
{"lineNum":"  350","line":""},
{"lineNum":"  351","line":"    try self.output_instruction_post_check(instr);","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  352","line":"}"},
{"lineNum":"  353","line":""},
{"lineNum":"  354","line":"/// Outputs the C code for an Instruction instruction after runtime checks have run."},
{"lineNum":"  355","line":"fn output_instruction_post_check(self: *Self, instr: *Instruction) CodeGen_Error!void {","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  356","line":"    switch (instr.kind) {","class":"lineNoCov","hits":"0","possible_hits":"4",},
{"lineNum":"  357","line":"        .load_unit => {"},
{"lineNum":"  358","line":"            // Do nothing!"},
{"lineNum":"  359","line":"        },"},
{"lineNum":"  360","line":"        .load_symbol => {"},
{"lineNum":"  361","line":"            if (instr.dest.?.get_expanded_type().* == .function) {","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  362","line":"                try self.output_var_assign_cast(instr.dest.?, instr.dest.?.get_expanded_type());","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  363","line":"            } else {"},
{"lineNum":"  364","line":"                try self.output_var_assign(instr.dest.?);","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  365","line":"            }"},
{"lineNum":"  366","line":"            try self.emitter.output_symbol(instr.data.symbol);","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  367","line":"            try self.writer.print(\";\\n\", .{});","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  368","line":"        },"},
{"lineNum":"  369","line":"        .load_int => {"},
{"lineNum":"  370","line":"            try self.output_var_assign(instr.dest.?);","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  371","line":"            try self.writer.print(\"{};\\n\", .{instr.data.int});","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  372","line":"        },"},
{"lineNum":"  373","line":"        .load_float => {"},
{"lineNum":"  374","line":"            try self.output_var_assign(instr.dest.?);","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  375","line":"            try self.writer.print(\"{};\\n\", .{instr.data.float});","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  376","line":"        },"},
{"lineNum":"  377","line":"        .load_string => {"},
{"lineNum":"  378","line":"            try self.output_var_assign_cast(instr.dest.?, instr.dest.?.get_expanded_type());","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  379","line":"            const interned_strings = self.module_interned_strings.get(instr.data.string_id.module_uid).?;","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  380","line":"            try self.writer.print(\"{{(uint8_t *)\\\"\", .{});","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  381","line":"            const str = interned_strings.items()[instr.data.string_id.string_idx];","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  382","line":"            for (str) |byte| {","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"  383","line":"                try self.writer.print(\"\\\\x{X:0>2}\", .{byte});","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  384","line":"            }","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"  385","line":"            try self.writer.print(\"\\\", {}}};\\n\", .{interned_strings.items()[instr.data.string_id.string_idx].len});","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  386","line":"        },"},
{"lineNum":"  387","line":"        .load_struct => {"},
{"lineNum":"  388","line":"            try self.output_var_assign_cast(instr.dest.?, instr.dest.?.get_expanded_type());","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  389","line":"            try self.writer.print(\"{{\", .{});","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  390","line":"            const dest_type = instr.dest.?.get_expanded_type();","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  391","line":"            if (dest_type.* == .struct_type or dest_type.* == .tuple_type) { // TODO: Likely need a `load_array` instruction","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  392","line":"                var product_list = dest_type.children().*;","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  393","line":"                for (instr.data.lval_list.items, product_list.items, 1..) |term, expected, i| {","class":"lineNoCov","hits":"0","possible_hits":"5",},
{"lineNum":"  394","line":"                    if (!expected.is_c_void_type()) {","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  395","line":"                        // Don\'t use values of type `void` (don\'t exist in C! (Goobersville!))"},
{"lineNum":"  396","line":"                        try self.output_rvalue(term, instr.kind.precedence());","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  397","line":"                        if (i < product_list.items.len and !product_list.items[i - 1].is_c_void_type()) {","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  398","line":"                            try self.writer.print(\", \", .{});","class":"lineNoCov","hits":"0","possible_hits":"4",},
{"lineNum":"  399","line":"                        }"},
{"lineNum":"  400","line":"                    }"},
{"lineNum":"  401","line":"                }","class":"lineNoCov","hits":"0","possible_hits":"5",},
{"lineNum":"  402","line":"            } else {"},
{"lineNum":"  403","line":"                for (instr.data.lval_list.items, 1..) |term, i| {","class":"lineNoCov","hits":"0","possible_hits":"5",},
{"lineNum":"  404","line":"                    // Don\'t use values of type `void` (don\'t exist in C! (Goobersville!))"},
{"lineNum":"  405","line":"                    try self.output_rvalue(term, instr.kind.precedence());","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  406","line":"                    if (i < instr.data.lval_list.items.len) {","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  407","line":"                        try self.writer.print(\", \", .{});","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  408","line":"                    }"},
{"lineNum":"  409","line":"                }","class":"lineNoCov","hits":"0","possible_hits":"4",},
{"lineNum":"  410","line":"            }"},
{"lineNum":"  411","line":"            try self.writer.print(\"}};\\n\", .{});","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  412","line":"        },"},
{"lineNum":"  413","line":"        .load_union => {"},
{"lineNum":"  414","line":"            try self.output_var_assign_cast(instr.dest.?, instr.dest.?.get_expanded_type());","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  415","line":"            try self.writer.print(\"{{.tag = {}\", .{instr.data.int});","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  416","line":"            if (instr.src1 != null and !instr.src1.?.get_expanded_type().is_c_void_type()) {","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  417","line":"                try self.writer.print(\", ._{} = \", .{instr.data.int});","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  418","line":"                try self.output_rvalue(instr.src1.?, instr.kind.precedence());","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  419","line":"            }"},
{"lineNum":"  420","line":"            try self.writer.print(\"}};\\n\", .{});","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  421","line":"        },"},
{"lineNum":"  422","line":"        .copy => {"},
{"lineNum":"  423","line":"            try self.output_var_assign(instr.dest.?);","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  424","line":"            try self.output_rvalue(instr.src1.?, instr.kind.precedence());","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  425","line":"            try self.writer.print(\";\\n\", .{});","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  426","line":"        },"},
{"lineNum":"  427","line":"        .mut_addr_of, .addr_of => {"},
{"lineNum":"  428","line":"            try self.output_var_assign(instr.dest.?);","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  429","line":"            try self.output_lvalue(instr.src1.?, instr.kind.precedence());","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  430","line":"            try self.writer.print(\";\\n\", .{});","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  431","line":"        },"},
{"lineNum":"  432","line":"        .mut_dyn_value, .dyn_value => {"},
{"lineNum":"  433","line":"            try self.output_var_assign_cast(instr.dest.?, instr.dest.?.get_expanded_type());","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  434","line":"            try self.writer.print(\"{{\", .{});","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  435","line":"            try self.output_lvalue(instr.src1.?, instr.kind.precedence());","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  436","line":"            try self.writer.print(\", &\", .{});","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  437","line":"            try self.output_vtable_impl(instr.data.dyn.impl);","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  438","line":"            try self.writer.print(\"}};\\n\", .{});","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  439","line":"        },"},
{"lineNum":"  440","line":"        .not,"},
{"lineNum":"  441","line":"        .negate_int,"},
{"lineNum":"  442","line":"        .negate_float,"},
{"lineNum":"  443","line":"        .bit_not,"},
{"lineNum":"  444","line":"        .equal,"},
{"lineNum":"  445","line":"        .not_equal,"},
{"lineNum":"  446","line":"        .greater_int,"},
{"lineNum":"  447","line":"        .greater_float,"},
{"lineNum":"  448","line":"        .greater_equal_int,"},
{"lineNum":"  449","line":"        .greater_equal_float,"},
{"lineNum":"  450","line":"        .lesser_int,"},
{"lineNum":"  451","line":"        .lesser_float,"},
{"lineNum":"  452","line":"        .lesser_equal_int,"},
{"lineNum":"  453","line":"        .lesser_equal_float,"},
{"lineNum":"  454","line":"        .add_int,"},
{"lineNum":"  455","line":"        .add_float,"},
{"lineNum":"  456","line":"        .sub_int,"},
{"lineNum":"  457","line":"        .sub_float,"},
{"lineNum":"  458","line":"        .mult_int,"},
{"lineNum":"  459","line":"        .mult_float,"},
{"lineNum":"  460","line":"        .div_int,"},
{"lineNum":"  461","line":"        .div_float,"},
{"lineNum":"  462","line":"        .mod,"},
{"lineNum":"  463","line":"        .bit_and,"},
{"lineNum":"  464","line":"        .bit_or,"},
{"lineNum":"  465","line":"        .bit_xor,"},
{"lineNum":"  466","line":"        .left_shift,"},
{"lineNum":"  467","line":"        .right_shift,"},
{"lineNum":"  468","line":"        => try self.output_operator(instr),","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"  469","line":"        .get_tag => {"},
{"lineNum":"  470","line":"            try self.output_var_assign(instr.dest.?);","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  471","line":"            try self.output_rvalue(instr.src1.?, instr.kind.precedence());","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  472","line":"            try self.writer.print(\".tag;\\n\", .{});","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  473","line":"        },"},
{"lineNum":"  474","line":"        .cast => {"},
{"lineNum":"  475","line":"            try self.output_var_assign(instr.dest.?);","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  476","line":"            try self.writer.print(\"(\", .{});","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  477","line":"            try self.emitter.output_type(instr.dest.?.get_expanded_type());","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  478","line":"            try self.writer.print(\")\", .{});","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  479","line":"            try self.output_rvalue(instr.src1.?, instr.kind.precedence());","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  480","line":"            try self.writer.print(\";\\n\", .{});","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  481","line":"        },"},
{"lineNum":"  482","line":"        .call => {"},
{"lineNum":"  483","line":"            // TODO: De-duplicate 2"},
{"lineNum":"  484","line":"            try self.output_call_prefix(instr);","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  485","line":"            try self.output_rvalue(instr.src1.?, instr.kind.precedence());","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  486","line":"            try self.writer.print(\"(\", .{});","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  487","line":"            for (instr.data.call.arg_lval_list.items, 0..) |term, i| {","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"  488","line":"                if (!term.get_expanded_type().is_c_void_type()) {","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  489","line":"                    // Do not output `void` arguments"},
{"lineNum":"  490","line":"                    try self.output_rvalue(term, HIGHEST_PRECEDENCE);","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  491","line":"                    if (i + 1 < instr.data.call.arg_lval_list.items.len and !instr.data.call.arg_lval_list.items[i + 1].get_expanded_type().is_c_void_type()) {","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  492","line":"                        try self.writer.print(\", \", .{});","class":"lineNoCov","hits":"0","possible_hits":"4",},
{"lineNum":"  493","line":"                    }"},
{"lineNum":"  494","line":"                }"},
{"lineNum":"  495","line":"            }","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"  496","line":"            try self.writer.print(\");\\n\", .{});","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  497","line":"        },"},
{"lineNum":"  498","line":"        .invoke => {"},
{"lineNum":"  499","line":"            // FIXME: High Cyclo"},
{"lineNum":"  500","line":"            try self.output_call_prefix(instr);","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  501","line":"            if (!instr.data.invoke.method_decl.method_decl.is_virtual) {","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  502","line":"                // method is non-virtual"},
{"lineNum":"  503","line":"                // { method name }({ args })"},
{"lineNum":"  504","line":"                try self.output_rvalue(instr.data.invoke.method_decl_lval.?, 2);","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  505","line":"                try self.writer.print(\"(\", .{});","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  506","line":"            } else if (instr.data.invoke.dyn_value != null) {","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  507","line":"                // method is virtual, dyn_value (receiver ptr + vtable ptr) isn\'t null"},
{"lineNum":"  508","line":"                // { dyn value }.vtable->{ method name }({ args })"},
{"lineNum":"  509","line":"                try self.output_rvalue(instr.data.invoke.dyn_value.?, 2);","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  510","line":"                try self.writer.print(\".vtable->{s}(\", .{instr.data.invoke.method_decl.method_decl.name.token().data});","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  511","line":"            } else {"},
{"lineNum":"  512","line":"                // method is virtual, dyn_value is null"},
{"lineNum":"  513","line":"                // { vtable impl }.{ method name }({ args })"},
{"lineNum":"  514","line":"                try self.output_vtable_impl(instr.data.invoke.method_decl.method_decl.impl.?);","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  515","line":"                try self.writer.print(\".{s}(\", .{instr.data.invoke.method_decl.method_decl.name.token().data});","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  516","line":"            }"},
{"lineNum":"  517","line":"            const num_invoke_args = instr.data.invoke.arg_lval_list.items.len;","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"  518","line":"            for (instr.data.invoke.arg_lval_list.items, 0..) |term, i| {","class":"lineNoCov","hits":"0","possible_hits":"4",},
{"lineNum":"  519","line":"                if (!term.get_expanded_type().is_c_void_type()) {","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  520","line":"                    // Do not output `void` arguments"},
{"lineNum":"  521","line":"                    try self.output_rvalue(term, HIGHEST_PRECEDENCE);","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  522","line":"                    if (instr.data.invoke.dyn_value != null and instr.data.invoke.dyn_value == term and i == 0) {","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  523","line":"                        try self.writer.print(\".data_ptr\", .{});","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  524","line":"                    }"},
{"lineNum":"  525","line":"                    if (i + 1 < num_invoke_args and !instr.data.invoke.arg_lval_list.items[i + 1].get_expanded_type().is_c_void_type()) {","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  526","line":"                        try self.writer.print(\", \", .{});","class":"lineNoCov","hits":"0","possible_hits":"4",},
{"lineNum":"  527","line":"                    }"},
{"lineNum":"  528","line":"                }"},
{"lineNum":"  529","line":"            }","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"  530","line":"            // TODO: context args"},
{"lineNum":"  531","line":"            try self.writer.print(\");\\n\", .{});","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  532","line":"        },"},
{"lineNum":"  533","line":"        .label,"},
{"lineNum":"  534","line":"        .jump,"},
{"lineNum":"  535","line":"        .branch_if_false,"},
{"lineNum":"  536","line":"        => {},"},
{"lineNum":"  537","line":"        .push_stack_trace => {"},
{"lineNum":"  538","line":"            var spaces = std.array_list.Managed(u8).init(std.heap.page_allocator); // page alloc ok, immediately deinit\'d","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  539","line":"            defer spaces.deinit();","class":"lineNoCov","hits":"0","possible_hits":"4",},
{"lineNum":"  540","line":"            for (1..instr.span.col - 1) |_| {","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"  541","line":"                spaces.print(\" \", .{}) catch unreachable;","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  542","line":"            }","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"  543","line":"            try self.writer.print(\"    orange_debug__lines[orange_debug__line_idx++] = \", .{});","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  544","line":""},
{"lineNum":"  545","line":"            try instr.span.print_debug_line(self.writer, Span.c_format);","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  546","line":"            try self.writer.print(\";\\n\", .{});","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  547","line":"        },"},
{"lineNum":"  548","line":"        .pop_stack_trace => {"},
{"lineNum":"  549","line":"            try self.writer.print(","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  550","line":"                \\\\    orange_debug__line_idx--;"},
{"lineNum":"  551","line":"                \\\\"},
{"lineNum":"  552","line":"            , .{});"},
{"lineNum":"  553","line":"        },"},
{"lineNum":"  554","line":"        .panic => {"},
{"lineNum":"  555","line":"            try self.writer.print(","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"  556","line":"                \\\\    orange_debug__panic(\"{s}\\n\");"},
{"lineNum":"  557","line":"                \\\\"},
{"lineNum":"  558","line":"            ,"},
{"lineNum":"  559","line":"                .{instr.data.string},","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"  560","line":"            );"},
{"lineNum":"  561","line":"        },"},
{"lineNum":"  562","line":"        else => std.debug.panic(\"compiler error: unimplemented output_instr() for: Kind.{s}\", .{@tagName(instr.kind)}),","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"  563","line":"    }"},
{"lineNum":"  564","line":"}"},
{"lineNum":"  565","line":""},
{"lineNum":"  566","line":"/// Outputs C code for the prefix of a call"},
{"lineNum":"  567","line":"fn output_call_prefix(self: *Self, instr: *Instruction) !void {","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  568","line":"    const void_fn = instr.dest.?.get_expanded_type().is_c_void_type();","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  569","line":"    const symbol_used = if (instr.dest.?.* == .symbver) instr.dest.?.symbver.symbol.uses > 0 else false;","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"  570","line":"    if (!symbol_used) {","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  571","line":"        try self.writer.print(\"    (void)\", .{});","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  572","line":"    } else if (!void_fn) {","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  573","line":"        try self.output_var_assign(instr.dest.?);","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  574","line":"    } else {"},
{"lineNum":"  575","line":"        try self.writer.print(\"    \", .{});","class":"lineNoCov","hits":"0","possible_hits":"4",},
{"lineNum":"  576","line":"    }"},
{"lineNum":"  577","line":"}"},
{"lineNum":"  578","line":""},
{"lineNum":"  579","line":"/// Outputs the C code for checking lvalue operations. The current checks are:"},
{"lineNum":"  580","line":"/// - Index bounds check"},
{"lineNum":"  581","line":"/// - Tag check on union selects"},
{"lineNum":"  582","line":"fn output_lvalue_check(self: *Self, span: Span, lvalue: *lval_.L_Value) CodeGen_Error!void {","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  583","line":"    switch (lvalue.*) {","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  584","line":"        .symbver => {},"},
{"lineNum":"  585","line":"        .dereference => try self.output_lvalue_check(span, lvalue.dereference.expr),","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  586","line":"        .index => {"},
{"lineNum":"  587","line":"            try self.output_lvalue_check(span, lvalue.index.lhs);","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  588","line":"            try self.output_lvalue_check(span, lvalue.index.rhs);","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  589","line":""},
{"lineNum":"  590","line":"            if (lvalue.index.length != null) {","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  591","line":"                try self.writer.print(\"    orange_debug__bounds_check(\", .{});","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  592","line":"                try self.output_rvalue(lvalue.index.rhs, HIGHEST_PRECEDENCE); // idx","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  593","line":"                try self.writer.print(\", \", .{});","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  594","line":"                try self.output_rvalue(lvalue.index.length.?, HIGHEST_PRECEDENCE); // length","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  595","line":"                try self.writer.print(\", \", .{});","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  596","line":"                try span.print_debug_line(self.writer, Span.c_format);","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  597","line":"                try self.writer.print(\");\\n\", .{});","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"  598","line":"            }"},
{"lineNum":"  599","line":"        },"},
{"lineNum":"  600","line":"        .select => {"},
{"lineNum":"  601","line":"            try self.output_lvalue_check(span, lvalue.select.lhs);","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  602","line":""},
{"lineNum":"  603","line":"            if (lvalue.select.tag != null) {","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  604","line":"                try self.writer.print(\"    orange_debug__tag_check(\", .{});","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  605","line":"                try self.output_rvalue(lvalue.select.tag.?, HIGHEST_PRECEDENCE); // tag","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  606","line":"                try self.writer.print(\", {}, \", .{lvalue.select.field});","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  607","line":"                try span.print_debug_line(self.writer, Span.c_format);","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  608","line":"                try self.writer.print(\");\\n\", .{});","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"  609","line":"            }"},
{"lineNum":"  610","line":"        },"},
{"lineNum":"  611","line":"        .raw_address => std.debug.panic(\"compiler error: cannot output raw address lvalue\", .{}),","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  612","line":"    }"},
{"lineNum":"  613","line":"}"},
{"lineNum":"  614","line":""},
{"lineNum":"  615","line":"/// Outputs the C code for an rvalue expression based on the provided lvalue."},
{"lineNum":"  616","line":"fn output_rvalue(self: *Self, lvalue: *lval_.L_Value, outer_precedence: i128) CodeGen_Error!void {","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  617","line":"    if (outer_precedence < lvalue.lval_precedence()) {","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  618","line":"        // Opening paren, if needed by precedence"},
{"lineNum":"  619","line":"        try self.writer.print(\"(\", .{});","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  620","line":"    }"},
{"lineNum":"  621","line":"    switch (lvalue.*) {","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  622","line":"        .dereference => {"},
{"lineNum":"  623","line":"            try self.writer.print(\"*\", .{});","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  624","line":"            if (lvalue.dereference.expr.get_expanded_type().addr_of.anytptr) {","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  625","line":"                // Cast from `void*` to true pointer before dereferencing"},
{"lineNum":"  626","line":"                try self.writer.print(\"(\", .{});","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  627","line":"                try self.emitter.output_type(lvalue.get_expanded_type());","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  628","line":"                try self.writer.print(\" *)\", .{});","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  629","line":"            }"},
{"lineNum":"  630","line":"            try self.output_rvalue(lvalue.dereference.expr, lvalue.lval_precedence());","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  631","line":"        },"},
{"lineNum":"  632","line":"        .index => {"},
{"lineNum":"  633","line":"            try self.writer.print(\"*\", .{});","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  634","line":"            try self.output_lvalue(lvalue, lvalue.lval_precedence());","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  635","line":"        },"},
{"lineNum":"  636","line":"        .select => {"},
{"lineNum":"  637","line":"            try self.output_rvalue(lvalue.select.lhs, lvalue.lval_precedence()); // This will dereference, no need for `->`","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  638","line":"            const unexpanded_type: ?*Type_AST = lvalue.select.lhs.get_expanded_type().common()._unexpanded_type;","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  639","line":"            if (unexpanded_type != null and unexpanded_type.?.* == .identifier and unexpanded_type.?.symbol() != null and unexpanded_type.?.symbol().?.storage == .@\"extern\") {","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  640","line":"                // Select the nominal C name"},
{"lineNum":"  641","line":"                const field_name = lvalue.select.lhs.get_expanded_type().children().items[@intCast(lvalue.select.field)].annotation.pattern.token().data;","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"  642","line":"                try self.writer.print(\".{s}\", .{field_name});","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  643","line":"            } else {"},
{"lineNum":"  644","line":"                // Select the structural Orange name"},
{"lineNum":"  645","line":"                try self.writer.print(\"._{}\", .{lvalue.select.field});","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"  646","line":"            }"},
{"lineNum":"  647","line":"        },"},
{"lineNum":"  648","line":"        .symbver => {"},
{"lineNum":"  649","line":"            if (lvalue.symbver.symbol.decl.?.* == .receiver) {","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  650","line":"                try self.writer.print(\"(\", .{});","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  651","line":"                try self.emitter.output_type(lvalue.get_expanded_type());","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  652","line":"                try self.writer.print(\")\", .{});","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  653","line":"            }"},
{"lineNum":"  654","line":"            try self.emitter.output_symbol(lvalue.symbver.symbol);","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  655","line":"        },"},
{"lineNum":"  656","line":"        .raw_address => std.debug.panic(\"compiler error: cannot output raw address lvalue\", .{}),","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  657","line":"    }"},
{"lineNum":"  658","line":"    if (outer_precedence < lvalue.lval_precedence()) {","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  659","line":"        // Closing paren, if needed by precedence"},
{"lineNum":"  660","line":"        try self.writer.print(\")\", .{});","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"  661","line":"    }"},
{"lineNum":"  662","line":"}"},
{"lineNum":"  663","line":""},
{"lineNum":"  664","line":"/// Outputs the C code for an lvalue expression."},
{"lineNum":"  665","line":"fn output_lvalue(self: *Self, lvalue: *lval_.L_Value, outer_precedence: i128) CodeGen_Error!void {","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  666","line":"    if (lvalue.expanded_type_sizeof() == 0) {","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  667","line":"        try self.writer.print(\"(void *)0xAAAAAAAA\", .{});","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  668","line":"        return;","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  669","line":"    }"},
{"lineNum":"  670","line":"    switch (lvalue.*) {","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"  671","line":"        .dereference => {"},
{"lineNum":"  672","line":"            // lvalue of a dereference is just the rvalue of it\'s expression"},
{"lineNum":"  673","line":"            try self.output_rvalue(lvalue.dereference.expr, outer_precedence);","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  674","line":"        },"},
{"lineNum":"  675","line":"        .index => {"},
{"lineNum":"  676","line":"            try self.writer.print(\"(\", .{});","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  677","line":""},
{"lineNum":"  678","line":"            // Generate reinterpret cast to pointer of elements"},
{"lineNum":"  679","line":"            try self.writer.print(\"(\", .{});","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  680","line":"            try self.emitter.output_type(lvalue.get_expanded_type());","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  681","line":"            try self.writer.print(\" *)\", .{});","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  682","line":"            if (lvalue.index.lhs.get_expanded_type().* == .addr_of) {","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  683","line":"                // Index of a multiptr addr, lvalue is simply the rvalue"},
{"lineNum":"  684","line":"                std.debug.assert(lvalue.index.lhs.get_expanded_type().addr_of.multiptr);","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"  685","line":"                try self.output_rvalue(lvalue.index.lhs, 2);","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  686","line":"            } else {"},
{"lineNum":"  687","line":"                // Index a slice, usual lvalue of lhs"},
{"lineNum":"  688","line":"                try self.output_lvalue(lvalue.index.lhs, 2);","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  689","line":"            }"},
{"lineNum":"  690","line":""},
{"lineNum":"  691","line":"            // Only generate index add if index is non-zero"},
{"lineNum":"  692","line":"            // NOTE: Do not generate checked addition. The index is already checked."},
{"lineNum":"  693","line":"            try self.writer.print(\" + \", .{});","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  694","line":"            try self.output_rvalue(lvalue.index.rhs, lvalue.lval_precedence());","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  695","line":""},
{"lineNum":"  696","line":"            try self.writer.print(\")\", .{});","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  697","line":"        },"},
{"lineNum":"  698","line":"        .symbver, .select => {"},
{"lineNum":"  699","line":"            // For symbvers and selects, just print out the rvalue version, and take the address of it"},
{"lineNum":"  700","line":"            if (outer_precedence < 2) {","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  701","line":"                try self.writer.print(\"(\", .{});","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  702","line":"            }"},
{"lineNum":"  703","line":"            try self.writer.print(\"&\", .{});","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  704","line":"            try self.output_rvalue(lvalue, 2);","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  705","line":"            if (outer_precedence < 2) { // TODO: De-magic number these","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  706","line":"                try self.writer.print(\")\", .{});","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"  707","line":"            }"},
{"lineNum":"  708","line":"        },"},
{"lineNum":"  709","line":"        .raw_address => std.debug.panic(\"compiler error: cannot output raw address lvalue\", .{}),","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  710","line":"    }"},
{"lineNum":"  711","line":"}"},
{"lineNum":"  712","line":""},
{"lineNum":"  713","line":"/// Emits the return statement from a function"},
{"lineNum":"  714","line":"fn output_return(self: *Self, return_symbol: *Symbol) CodeGen_Error!void {","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  715","line":"    try self.writer.print(\"    return\", .{});","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  716","line":"    if (return_symbol.defs > 0 and !return_symbol.expanded_type().is_c_void_type()) {","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  717","line":"        try self.writer.print(\" \", .{});","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  718","line":"        try self.emitter.output_symbol(return_symbol);","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  719","line":"    }"},
{"lineNum":"  720","line":"    try self.writer.print(\";\\n\", .{});","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  721","line":"}"},
{"lineNum":"  722","line":""},
{"lineNum":"  723","line":"/// Outputs an assignment to a symbol template. It is expected that a value is output immediately"},
{"lineNum":"  724","line":"/// after this to complete the assignment."},
{"lineNum":"  725","line":"fn output_var_assign(self: *Self, lval: *lval_.L_Value) CodeGen_Error!void {","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  726","line":"    try self.writer.print(\"    \", .{});","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  727","line":"    try self.output_rvalue(lval, HIGHEST_PRECEDENCE);","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  728","line":"    try self.writer.print(\" = \", .{});","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  729","line":"}"},
{"lineNum":"  730","line":""},
{"lineNum":"  731","line":"/// Outputs the C code for assigning a value to a variable with a cast."},
{"lineNum":"  732","line":"fn output_var_assign_cast(self: *Self, lval: *lval_.L_Value, _type: *Type_AST) CodeGen_Error!void {","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  733","line":"    try self.output_var_assign(lval);","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  734","line":"    try self.writer.print(\"(\", .{});","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  735","line":"    try self.emitter.output_type(_type);","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  736","line":"    try self.writer.print(\")\", .{});","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  737","line":"}"},
{"lineNum":"  738","line":""},
{"lineNum":"  739","line":"/// Outputs the C code for an operator from an Instruction."},
{"lineNum":"  740","line":"fn output_operator(self: *Self, instr: *Instruction) CodeGen_Error!void {","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  741","line":"    try self.output_var_assign(instr.dest.?);","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  742","line":"    if (instr.kind.is_checked() and instr.dest.?.get_expanded_type().can_expanded_represent_int()) { // TODO: Check if checked operations are enabled, too","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  743","line":"        try self.writer.print(\"orange_debug__{s}_{s}(\", .{ instr.kind.checked_name(), prelude_.info_from_ast(instr.dest.?.get_expanded_type()).?.c_name });","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  744","line":"        try self.output_rvalue(instr.src1.?, instr.kind.precedence());","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  745","line":"        try self.writer.print(\", \", .{});","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  746","line":"        if (instr.kind.arity() == .binop) {","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  747","line":"            try self.output_rvalue(instr.src2.?, instr.kind.precedence());","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  748","line":"            try self.writer.print(\", \", .{});","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  749","line":"        }"},
{"lineNum":"  750","line":"        try instr.span.print_debug_line(self.writer, Span.c_format);","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  751","line":"        try self.writer.print(\")\", .{});","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  752","line":"    } else if (instr.kind.arity() == .unop) {","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  753","line":"        // Unop, no-check"},
{"lineNum":"  754","line":"        try self.writer.print(\"{s}\", .{instr.kind.c_token()});","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  755","line":"        try self.output_rvalue(instr.src1.?, instr.kind.precedence());","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  756","line":"    } else {"},
{"lineNum":"  757","line":"        // Binop, no-check"},
{"lineNum":"  758","line":"        try self.output_rvalue(instr.src1.?, instr.kind.precedence());","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  759","line":"        try self.writer.print(\" {s} \", .{instr.kind.c_token()});","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  760","line":"        try self.output_rvalue(instr.src2.?, instr.kind.precedence());","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  761","line":"    }"},
{"lineNum":"  762","line":"    try self.writer.print(\";\\n\", .{});","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  763","line":"}"},
{"lineNum":"  764","line":""},
{"lineNum":"  765","line":"/// Prints out the vtable name given an impl AST"},
{"lineNum":"  766","line":"fn output_vtable_impl(self: *Self, impl: *ast_.AST) CodeGen_Error!void {","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  767","line":"    const impl_module = impl.scope().?.module.?; // what makes you think the impl is in the same module??","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  768","line":"    try self.writer.print(\"{s}__{s}_{}__vtable\", .{ impl_module.package_name, impl_module.name(), impl.scope().?.uid });","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  769","line":"}"},
]};
var percent_low = 25;var percent_high = 75;
var header = { "command" : "orng-test", "date" : "2025-11-10 15:43:08", "instrumented" : 390, "covered" : 0,};
var merged_data = [];
