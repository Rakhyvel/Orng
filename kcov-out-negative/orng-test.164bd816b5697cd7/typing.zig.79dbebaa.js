var data = {lines:[
{"lineNum":"    1","line":"//! This file contains the semantic validation logic for types."},
{"lineNum":"    2","line":""},
{"lineNum":"    3","line":"const std = @import(\"std\");"},
{"lineNum":"    4","line":"const ast_ = @import(\"../ast/ast.zig\");"},
{"lineNum":"    5","line":"const args_ = @import(\"args.zig\");"},
{"lineNum":"    6","line":"const errs_ = @import(\"../util/errors.zig\");"},
{"lineNum":"    7","line":"const prelude_ = @import(\"../hierarchy/prelude.zig\");"},
{"lineNum":"    8","line":"const Span = @import(\"../util/span.zig\");"},
{"lineNum":"    9","line":"const Type_AST = @import(\"../types/type.zig\").Type_AST;"},
{"lineNum":"   10","line":""},
{"lineNum":"   11","line":"const Validate_Error_Enum = error{CompileError};"},
{"lineNum":"   12","line":""},
{"lineNum":"   13","line":"pub fn type_check(span: Span, got: *Type_AST, expected: ?*Type_AST, errors: *errs_.Errors) Validate_Error_Enum!void {","class":"lineCov","hits":"2","order":"2150","possible_hits":"2",},
{"lineNum":"   14","line":"    if (expected != null and !got.types_match(expected.?)) {","class":"lineCov","hits":"2","order":"2151","possible_hits":"2",},
{"lineNum":"   15","line":"        return throw_unexpected_type(span, expected.?, got, errors);","class":"lineCov","hits":"2","order":"2155","possible_hits":"2",},
{"lineNum":"   16","line":"    }"},
{"lineNum":"   17","line":"}"},
{"lineNum":"   18","line":""},
{"lineNum":"   19","line":"/// Checks that a type is equal to unit, throws an error if it is not."},
{"lineNum":"   20","line":"pub fn middle_statement_check(span: Span, got: *Type_AST, errors: *errs_.Errors) Validate_Error_Enum!void {","class":"lineCov","hits":"2","order":"3275","possible_hits":"2",},
{"lineNum":"   21","line":"    if (!prelude_.unit_type.types_match(got) and !got.types_match(prelude_.void_type)) {","class":"lineCov","hits":"2","order":"3276","possible_hits":"2",},
{"lineNum":"   22","line":"        return throw_unexpected_type(span, prelude_.unit_type, got, errors);","class":"lineCov","hits":"2","order":"3277","possible_hits":"2",},
{"lineNum":"   23","line":"    }"},
{"lineNum":"   24","line":"}"},
{"lineNum":"   25","line":""},
{"lineNum":"   26","line":"pub fn type_check_int("},
{"lineNum":"   27","line":"    ast: *ast_.AST,"},
{"lineNum":"   28","line":"    expected: ?*Type_AST, // This should NOT be expanded < it is, though..."},
{"lineNum":"   29","line":"    errors: *errs_.Errors,"},
{"lineNum":"   30","line":") Validate_Error_Enum!*Type_AST {","class":"lineCov","hits":"2","order":"2036","possible_hits":"2",},
{"lineNum":"   31","line":"    const expanded_expected = if (expected != null) expected.?.expand_identifier() else null;","class":"lineCov","hits":"2","order":"2037","possible_hits":"2",},
{"lineNum":"   32","line":""},
{"lineNum":"   33","line":"    if (expanded_expected == null or prelude_.unit_type.types_match(expanded_expected.?)) {","class":"lineCov","hits":"2","order":"2038","possible_hits":"2",},
{"lineNum":"   34","line":"        return prelude_.int_type;","class":"lineCov","hits":"1","order":"2039","possible_hits":"1",},
{"lineNum":"   35","line":"    }"},
{"lineNum":"   36","line":""},
{"lineNum":"   37","line":"    if (expanded_expected != null) { //and !try checked_types_match(prelude_.unit_type, expanded_expected.?, errors)","class":"lineCov","hits":"1","order":"2132","possible_hits":"1",},
{"lineNum":"   38","line":"        const info = prelude_.info_from_ast(expanded_expected.?);","class":"lineCov","hits":"3","order":"2133","possible_hits":"3",},
{"lineNum":"   39","line":"        if (info != null and info.?.bounds != null) {","class":"lineCov","hits":"2","order":"2142","possible_hits":"2",},
{"lineNum":"   40","line":"            if (ast.int.data < info.?.bounds.?.lower or","class":"linePartCov","hits":"2","order":"2143","possible_hits":"3",},
{"lineNum":"   41","line":"                ast.int.data > info.?.bounds.?.upper)","class":"lineCov","hits":"2","order":"2144","possible_hits":"2",},
{"lineNum":"   42","line":"            {"},
{"lineNum":"   43","line":"                // This error is thrown because the `expanded_expected` is out of bounds of the expected type"},
{"lineNum":"   44","line":"                errors.add_error(errs_.Error{ .integer_out_of_bounds = .{","class":"lineCov","hits":"2","order":"6764","possible_hits":"2",},
{"lineNum":"   45","line":"                    .span = ast.token().span,","class":"lineCov","hits":"1","order":"6765","possible_hits":"1",},
{"lineNum":"   46","line":"                    .expected = expected.?,","class":"lineCov","hits":"2","order":"6766","possible_hits":"2",},
{"lineNum":"   47","line":"                    .value = ast.int.data,","class":"lineCov","hits":"3","order":"6767","possible_hits":"3",},
{"lineNum":"   48","line":"                } });"},
{"lineNum":"   49","line":"                return error.CompileError;","class":"lineCov","hits":"3","order":"2145","possible_hits":"3",},
{"lineNum":"   50","line":"            }"},
{"lineNum":"   51","line":"        } else {"},
{"lineNum":"   52","line":"            // This error is thrown because the `expanded_expected` is not an integer primitive type"},
{"lineNum":"   53","line":"            return throw_unexpected_type(ast.token().span, expanded_expected.?, prelude_.int_type, errors);","class":"linePartCov","hits":"3","order":"2146","possible_hits":"4",},
{"lineNum":"   54","line":"        }"},
{"lineNum":"   55","line":"    }"},
{"lineNum":"   56","line":"    return expected orelse prelude_.int_type;","class":"lineCov","hits":"2","order":"2147","possible_hits":"2",},
{"lineNum":"   57","line":"}"},
{"lineNum":"   58","line":""},
{"lineNum":"   59","line":"pub fn type_check_float(ast: *ast_.AST, expected: ?*Type_AST, errors: *errs_.Errors) Validate_Error_Enum!*Type_AST {","class":"lineCov","hits":"2","order":"6725","possible_hits":"2",},
{"lineNum":"   60","line":"    if (expected != null and !expected.?.can_represent_float()) {","class":"lineCov","hits":"2","order":"6726","possible_hits":"2",},
{"lineNum":"   61","line":"        return throw_unexpected_type(ast.token().span, expected.?, prelude_.float_type, errors);","class":"lineCov","hits":"2","order":"6727","possible_hits":"2",},
{"lineNum":"   62","line":"    }"},
{"lineNum":"   63","line":"    return expected orelse prelude_.float_type;","class":"lineCov","hits":"2","order":"6728","possible_hits":"2",},
{"lineNum":"   64","line":"}"},
{"lineNum":"   65","line":""},
{"lineNum":"   66","line":"pub fn type_check_eq(span: Span, got: *Type_AST, errors: *errs_.Errors) Validate_Error_Enum!void {","class":"lineCov","hits":"2","order":"3407","possible_hits":"2",},
{"lineNum":"   67","line":"    if (!got.is_eq_type()) {","class":"lineCov","hits":"1","order":"3408","possible_hits":"1",},
{"lineNum":"   68","line":"        errors.add_error(errs_.Error{ .expected_builtin_typeclass = .{ .span = span, .expected = \"equalable\", .got = got } });","class":"lineCov","hits":"1","order":"6886","possible_hits":"1",},
{"lineNum":"   69","line":"        return error.CompileError;","class":"lineCov","hits":"2","order":"3417","possible_hits":"2",},
{"lineNum":"   70","line":"    }"},
{"lineNum":"   71","line":"}"},
{"lineNum":"   72","line":""},
{"lineNum":"   73","line":"pub fn type_check_ord(span: Span, got: *Type_AST, errors: *errs_.Errors) Validate_Error_Enum!void {","class":"lineCov","hits":"2","order":"3389","possible_hits":"2",},
{"lineNum":"   74","line":"    if (!got.is_ord_type()) {","class":"lineCov","hits":"1","order":"3390","possible_hits":"1",},
{"lineNum":"   75","line":"        errors.add_error(errs_.Error{ .expected_builtin_typeclass = .{ .span = span, .expected = \"orderable\", .got = got } });","class":"lineCov","hits":"1","order":"6891","possible_hits":"1",},
{"lineNum":"   76","line":"        return error.CompileError;","class":"lineCov","hits":"2","order":"3399","possible_hits":"2",},
{"lineNum":"   77","line":"    }"},
{"lineNum":"   78","line":"}"},
{"lineNum":"   79","line":""},
{"lineNum":"   80","line":"pub fn type_check_arithmetic(span: Span, got: *Type_AST, errors: *errs_.Errors) Validate_Error_Enum!void {","class":"lineCov","hits":"2","order":"3352","possible_hits":"2",},
{"lineNum":"   81","line":"    if (!got.is_num_type()) {","class":"lineCov","hits":"1","order":"3353","possible_hits":"1",},
{"lineNum":"   82","line":"        errors.add_error(errs_.Error{ .expected_builtin_typeclass = .{ .span = span, .expected = \"arithmetic\", .got = got } });","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   83","line":"        return error.CompileError;","class":"linePartCov","hits":"1","order":"3364","possible_hits":"2",},
{"lineNum":"   84","line":"    }"},
{"lineNum":"   85","line":"}"},
{"lineNum":"   86","line":""},
{"lineNum":"   87","line":"pub fn type_check_integral(span: Span, got: *Type_AST, errors: *errs_.Errors) Validate_Error_Enum!void {","class":"lineCov","hits":"2","order":"5815","possible_hits":"2",},
{"lineNum":"   88","line":"    if (!got.is_int_type()) {","class":"lineCov","hits":"1","order":"5816","possible_hits":"1",},
{"lineNum":"   89","line":"        errors.add_error(errs_.Error{ .expected_builtin_typeclass = .{ .span = span, .expected = \"integer\", .got = got } });","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   90","line":"        return error.CompileError;","class":"linePartCov","hits":"1","order":"5823","possible_hits":"2",},
{"lineNum":"   91","line":"    }"},
{"lineNum":"   92","line":"}"},
{"lineNum":"   93","line":""},
{"lineNum":"   94","line":"pub fn type_check_bits(span: Span, got: *Type_AST, errors: *errs_.Errors) Validate_Error_Enum!void {","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"   95","line":"    if (!got.is_bits_type()) {","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   96","line":"        errors.add_error(errs_.Error{ .expected_builtin_typeclass = .{ .span = span, .expected = \"bits\", .got = got } });","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   97","line":"        return error.CompileError;","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"   98","line":"    }"},
{"lineNum":"   99","line":"}"},
{"lineNum":"  100","line":""},
{"lineNum":"  101","line":"pub fn throw_unexpected_type(span: Span, expected: *Type_AST, got: *Type_AST, errors: *errs_.Errors) Validate_Error_Enum {","class":"lineCov","hits":"2","order":"4936","possible_hits":"2",},
{"lineNum":"  102","line":"    errors.add_error(errs_.Error{ .unexpected_type = .{ .span = span, .expected = expected, .got = got } });","class":"lineCov","hits":"1","order":"4937","possible_hits":"1",},
{"lineNum":"  103","line":"    return error.CompileError;","class":"lineCov","hits":"1","order":"4938","possible_hits":"1",},
{"lineNum":"  104","line":"}"},
{"lineNum":"  105","line":""},
{"lineNum":"  106","line":"pub fn throw_unexpected_void_type(span: Span, errors: *errs_.Errors) Validate_Error_Enum {","class":"lineCov","hits":"2","order":"4834","possible_hits":"2",},
{"lineNum":"  107","line":"    errors.add_error(errs_.Error{ .basic = .{ .span = span, .msg = \"comptime cannot be type `Void`\" } });","class":"lineCov","hits":"1","order":"4835","possible_hits":"1",},
{"lineNum":"  108","line":"    return error.CompileError;","class":"lineCov","hits":"1","order":"4836","possible_hits":"1",},
{"lineNum":"  109","line":"}"},
{"lineNum":"  110","line":""},
{"lineNum":"  111","line":"fn throw_not_selectable(_type: *Type_AST, span: Span, errors: *errs_.Errors) Validate_Error_Enum {","class":"lineCov","hits":"2","order":"6802","possible_hits":"2",},
{"lineNum":"  112","line":"    errors.add_error(errs_.Error{ .not_selectable = .{ .span = span, ._type = _type } });","class":"lineCov","hits":"1","order":"6803","possible_hits":"1",},
{"lineNum":"  113","line":"    return error.CompileError;","class":"lineCov","hits":"1","order":"6804","possible_hits":"1",},
{"lineNum":"  114","line":"}"},
{"lineNum":"  115","line":""},
{"lineNum":"  116","line":"pub fn throw_wrong_from("},
{"lineNum":"  117","line":"    from_name: []const u8,"},
{"lineNum":"  118","line":"    operator_name: []const u8,"},
{"lineNum":"  119","line":"    got: *Type_AST,"},
{"lineNum":"  120","line":"    span: Span,"},
{"lineNum":"  121","line":"    errors: *errs_.Errors,"},
{"lineNum":"  122","line":") Validate_Error_Enum {","class":"lineCov","hits":"2","order":"6587","possible_hits":"2",},
{"lineNum":"  123","line":"    errors.add_error(errs_.Error{ .wrong_from = .{","class":"lineCov","hits":"1","order":"6588","possible_hits":"1",},
{"lineNum":"  124","line":"        .span = span,"},
{"lineNum":"  125","line":"        .operator = operator_name,"},
{"lineNum":"  126","line":"        .from = from_name,"},
{"lineNum":"  127","line":"        .got = got,"},
{"lineNum":"  128","line":"    } });"},
{"lineNum":"  129","line":"    return error.CompileError;","class":"lineCov","hits":"1","order":"6589","possible_hits":"1",},
{"lineNum":"  130","line":"}"},
{"lineNum":"  131","line":""},
{"lineNum":"  132","line":"pub fn coalesce_operator(lhs_expanded_type: *Type_AST, ast: *ast_.AST, span: Span, errors: *errs_.Errors) Validate_Error_Enum!void {","class":"lineCov","hits":"2","order":"6699","possible_hits":"2",},
{"lineNum":"  133","line":"    std.debug.assert(ast.* == .@\"orelse\" or ast.* == .@\"catch\");","class":"lineCov","hits":"2","order":"6700","possible_hits":"2",},
{"lineNum":"  134","line":"    const expected_sum_from: Type_AST.Sum_From = if (ast.* == .@\"orelse\") .optional else .@\"error\";","class":"lineCov","hits":"3","order":"6701","possible_hits":"3",},
{"lineNum":"  135","line":"    if (lhs_expanded_type.* != .enum_type or lhs_expanded_type.enum_type.from != expected_sum_from) {","class":"lineCov","hits":"2","order":"6702","possible_hits":"2",},
{"lineNum":"  136","line":"        errors.add_error(errs_.Error{ .wrong_from = .{","class":"lineCov","hits":"2","order":"6708","possible_hits":"2",},
{"lineNum":"  137","line":"            .span = span,"},
{"lineNum":"  138","line":"            .operator = @tagName(ast.*),","class":"lineCov","hits":"3","order":"6709","possible_hits":"3",},
{"lineNum":"  139","line":"            .from = @tagName(expected_sum_from),","class":"lineCov","hits":"3","order":"6710","possible_hits":"3",},
{"lineNum":"  140","line":"            .got = lhs_expanded_type,"},
{"lineNum":"  141","line":"        } });"},
{"lineNum":"  142","line":"        return error.CompileError;","class":"lineCov","hits":"3","order":"6703","possible_hits":"3",},
{"lineNum":"  143","line":"    }"},
{"lineNum":"  144","line":"}"},
{"lineNum":"  145","line":""},
{"lineNum":"  146","line":"fn put_many_annot_map("},
{"lineNum":"  147","line":"    asts: *std.array_list.Managed(*Type_AST),"},
{"lineNum":"  148","line":"    new_terms: *std.array_list.Managed(*Type_AST),"},
{"lineNum":"  149","line":"    map: *std.StringArrayHashMap(*Type_AST),"},
{"lineNum":"  150","line":"    errors: *errs_.Errors,"},
{"lineNum":"  151","line":") Validate_Error_Enum!void {"},
{"lineNum":"  152","line":"    for (asts.items) |term| {"},
{"lineNum":"  153","line":"        try args_.put_ast_map(term.annotation.type, term.annotation.pattern.token().data, term.token().span, map, errors);"},
{"lineNum":"  154","line":"        new_terms.append(term) catch unreachable;"},
{"lineNum":"  155","line":"    }"},
{"lineNum":"  156","line":"}"},
{"lineNum":"  157","line":""},
{"lineNum":"  158","line":"pub fn find_select_pos(_type: *Type_AST, field: []const u8, span: Span, errors: *errs_.Errors) Validate_Error_Enum!usize {","class":"lineCov","hits":"2","order":"3310","possible_hits":"2",},
{"lineNum":"  159","line":"    if (_type.* != .struct_type and _type.* != .enum_type and _type.* != .untagged_sum_type and _type.* != .context_type) {","class":"lineCov","hits":"2","order":"3311","possible_hits":"2",},
{"lineNum":"  160","line":"        return throw_not_selectable(_type, span, errors);","class":"lineCov","hits":"2","order":"3312","possible_hits":"2",},
{"lineNum":"  161","line":"    }"},
{"lineNum":"  162","line":"    for (_type.children().items, 0..) |term, i| {","class":"lineCov","hits":"3","order":"3313","possible_hits":"3",},
{"lineNum":"  163","line":"        if (term.* != .annotation) {","class":"lineCov","hits":"1","order":"3314","possible_hits":"1",},
{"lineNum":"  164","line":"            return throw_not_selectable(_type, span, errors);","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  165","line":"        }"},
{"lineNum":"  166","line":"        if (std.mem.eql(u8, term.annotation.pattern.token().data, field)) {","class":"lineCov","hits":"2","order":"3315","possible_hits":"2",},
{"lineNum":"  167","line":"            return i;","class":"lineCov","hits":"1","order":"3318","possible_hits":"1",},
{"lineNum":"  168","line":"        }"},
{"lineNum":"  169","line":"    } else {","class":"lineCov","hits":"1","order":"3316","possible_hits":"1",},
{"lineNum":"  170","line":"        errors.add_error(errs_.Error{ .member_not_in_type = .{ .span = span, .identifier = field, .name = \"struct\", .type = _type } });","class":"lineCov","hits":"1","order":"6809","possible_hits":"1",},
{"lineNum":"  171","line":"        return error.CompileError;","class":"lineCov","hits":"2","order":"3317","possible_hits":"2",},
{"lineNum":"  172","line":"    }"},
{"lineNum":"  173","line":"}"},
]};
var percent_low = 25;var percent_high = 75;
var header = { "command" : "orng-test", "date" : "2025-11-10 15:43:08", "instrumented" : 77, "covered" : 70,};
var merged_data = [];
