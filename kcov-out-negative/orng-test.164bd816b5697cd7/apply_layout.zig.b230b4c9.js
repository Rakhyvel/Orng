var data = {lines:[
{"lineNum":"    1","line":"const std = @import(\"std\");"},
{"lineNum":"    2","line":"const Span = @import(\"../util/span.zig\");"},
{"lineNum":"    3","line":"const String = @import(\"../zig-string/zig-string.zig\").String;"},
{"lineNum":"    4","line":"const Token = @import(\"../lexer/token.zig\");"},
{"lineNum":"    5","line":""},
{"lineNum":"    6","line":"const Self: type = @This();"},
{"lineNum":"    7","line":""},
{"lineNum":"    8","line":"pub fn init() Self {","class":"lineCov","hits":"1","order":"498","possible_hits":"1",},
{"lineNum":"    9","line":"    return Self{};","class":"lineCov","hits":"1","order":"499","possible_hits":"1",},
{"lineNum":"   10","line":"}"},
{"lineNum":"   11","line":""},
{"lineNum":"   12","line":"pub fn run(self: Self, tokens: *std.array_list.Managed(Token)) error{}!*std.array_list.Managed(Token) {","class":"lineCov","hits":"2","order":"646","possible_hits":"2",},
{"lineNum":"   13","line":"    _ = self;"},
{"lineNum":"   14","line":"    strip_comments(tokens);","class":"lineCov","hits":"1","order":"647","possible_hits":"1",},
{"lineNum":"   15","line":"    combine_multilines(tokens);","class":"lineCov","hits":"1","order":"662","possible_hits":"1",},
{"lineNum":"   16","line":"    trailing_comma_rules(tokens);","class":"lineCov","hits":"1","order":"672","possible_hits":"1",},
{"lineNum":"   17","line":"    newline_rules(tokens);","class":"lineCov","hits":"1","order":"688","possible_hits":"1",},
{"lineNum":"   18","line":"    return tokens;","class":"lineCov","hits":"1","order":"705","possible_hits":"1",},
{"lineNum":"   19","line":"}"},
{"lineNum":"   20","line":""},
{"lineNum":"   21","line":"/// Removes comment tokens from token stream. This should be disabled for documentation generation."},
{"lineNum":"   22","line":"fn strip_comments(tokens: *std.array_list.Managed(Token)) void {","class":"lineCov","hits":"2","order":"648","possible_hits":"2",},
{"lineNum":"   23","line":"    var i: usize = 0;","class":"lineCov","hits":"1","order":"649","possible_hits":"1",},
{"lineNum":"   24","line":"    while (i < tokens.items.len - 1) : (i += 1) {","class":"linePartCov","hits":"4","order":"650","possible_hits":"5",},
{"lineNum":"   25","line":"        const token = tokens.items[i];","class":"lineCov","hits":"3","order":"651","possible_hits":"3",},
{"lineNum":"   26","line":"        if (token.kind != .comment) {","class":"lineCov","hits":"1","order":"652","possible_hits":"1",},
{"lineNum":"   27","line":"            continue;","class":"lineCov","hits":"2","order":"653","possible_hits":"2",},
{"lineNum":"   28","line":"        }"},
{"lineNum":"   29","line":""},
{"lineNum":"   30","line":"        var j: usize = i;","class":"lineCov","hits":"1","order":"654","possible_hits":"1",},
{"lineNum":"   31","line":"        while (j >= 0 and (tokens.items[j].kind == .newline or tokens.items[j].kind == .comment)) {","class":"lineCov","hits":"2","order":"655","possible_hits":"2",},
{"lineNum":"   32","line":"            _ = tokens.orderedRemove(j);","class":"lineCov","hits":"1","order":"656","possible_hits":"1",},
{"lineNum":"   33","line":"            if (j != 0) {","class":"lineCov","hits":"1","order":"657","possible_hits":"1",},
{"lineNum":"   34","line":"                j -= 1;","class":"linePartCov","hits":"1","order":"658","possible_hits":"2",},
{"lineNum":"   35","line":"            } else {"},
{"lineNum":"   36","line":"                break;","class":"lineCov","hits":"1","order":"4412","possible_hits":"1",},
{"lineNum":"   37","line":"            }"},
{"lineNum":"   38","line":"        }","class":"lineCov","hits":"3","order":"659","possible_hits":"3",},
{"lineNum":"   39","line":"        i = j;","class":"lineCov","hits":"1","order":"660","possible_hits":"1",},
{"lineNum":"   40","line":"    }","class":"lineCov","hits":"1","order":"661","possible_hits":"1",},
{"lineNum":"   41","line":"}"},
{"lineNum":"   42","line":""},
{"lineNum":"   43","line":"fn combine_multilines(tokens: *std.array_list.Managed(Token)) void {","class":"lineCov","hits":"2","order":"663","possible_hits":"2",},
{"lineNum":"   44","line":"    var i: usize = 0;","class":"lineCov","hits":"1","order":"664","possible_hits":"1",},
{"lineNum":"   45","line":"    while (i < tokens.items.len) : (i += 1) {","class":"linePartCov","hits":"4","order":"665","possible_hits":"5",},
{"lineNum":"   46","line":"        var out: ?String = null;","class":"lineCov","hits":"1","order":"666","possible_hits":"1",},
{"lineNum":"   47","line":"        var span: ?Span = null;","class":"lineCov","hits":"1","order":"667","possible_hits":"1",},
{"lineNum":"   48","line":"        while (i < tokens.items.len and tokens.items[i].kind == .multi_line_string) : (i += 1) {","class":"linePartCov","hits":"3","order":"668","possible_hits":"4",},
{"lineNum":"   49","line":"            if (out == null) {","class":"lineCov","hits":"1","order":"5919","possible_hits":"1",},
{"lineNum":"   50","line":"                out = String.init_with_contents(std.heap.page_allocator, \"\") catch unreachable;","class":"lineCov","hits":"3","order":"5920","possible_hits":"3",},
{"lineNum":"   51","line":"                span = tokens.items[i].span;","class":"lineCov","hits":"2","order":"5921","possible_hits":"2",},
{"lineNum":"   52","line":"            } else {"},
{"lineNum":"   53","line":"                // out was not null => there must have been a multiline before this one => insert newline"},
{"lineNum":"   54","line":"                out.?.insert(\"\\n\", out.?.len()) catch unreachable;","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"   55","line":"            }"},
{"lineNum":"   56","line":"            const multiline: Token = tokens.orderedRemove(i); // Remove multiline","class":"lineCov","hits":"1","order":"5922","possible_hits":"1",},
{"lineNum":"   57","line":"            _ = tokens.orderedRemove(i); // Remove newline (do not compensate)","class":"lineCov","hits":"1","order":"5923","possible_hits":"1",},
{"lineNum":"   58","line":"            i -|= 1; // Compensate for removed multiline","class":"lineCov","hits":"1","order":"5924","possible_hits":"1",},
{"lineNum":"   59","line":"            out.?.insert(multiline.data, out.?.len()) catch unreachable; // Append data to out","class":"lineCov","hits":"2","order":"5925","possible_hits":"2",},
{"lineNum":"   60","line":"        }","class":"lineCov","hits":"1","order":"5926","possible_hits":"1",},
{"lineNum":"   61","line":"        if (out != null) {","class":"lineCov","hits":"1","order":"669","possible_hits":"1",},
{"lineNum":"   62","line":"            const token = Token.init(","class":"lineCov","hits":"1","order":"5938","possible_hits":"1",},
{"lineNum":"   63","line":"                (out.?.toOwned() catch unreachable).?,","class":"lineCov","hits":"3","order":"5927","possible_hits":"3",},
{"lineNum":"   64","line":"                .multi_line_string,"},
{"lineNum":"   65","line":"                span.?.filename,","class":"lineCov","hits":"3","order":"5934","possible_hits":"3",},
{"lineNum":"   66","line":"                span.?.line_text,","class":"lineCov","hits":"3","order":"5935","possible_hits":"3",},
{"lineNum":"   67","line":"                span.?.line_number,","class":"lineCov","hits":"3","order":"5936","possible_hits":"3",},
{"lineNum":"   68","line":"                span.?.col,","class":"lineCov","hits":"3","order":"5937","possible_hits":"3",},
{"lineNum":"   69","line":"            );"},
{"lineNum":"   70","line":"            tokens.insert(i, token) catch unreachable;","class":"lineCov","hits":"3","order":"670","possible_hits":"3",},
{"lineNum":"   71","line":"        }"},
{"lineNum":"   72","line":"    }","class":"lineCov","hits":"1","order":"671","possible_hits":"1",},
{"lineNum":"   73","line":"}"},
{"lineNum":"   74","line":""},
{"lineNum":"   75","line":"/// THIS PASS MUST BE RUN BEFORE NEWLINES ARE REMOVED. It uses newlines and"},
{"lineNum":"   76","line":"/// parentheses to detect and remove trailing commas and bars."},
{"lineNum":"   77","line":"///"},
{"lineNum":"   78","line":"/// Given an input token stream:"},
{"lineNum":"   79","line":"///     [ ... X \',\' \'\\n\' \')\' ... ]"},
{"lineNum":"   80","line":"/// The trailing comma/bar is removed, like so:"},
{"lineNum":"   81","line":"///     [ ... X \',\' \')\' ... ]"},
{"lineNum":"   82","line":"/// When X is one of the following kind of tokens:"},
{"lineNum":"   83","line":"///     1. identifier (including `true` or `false`)"},
{"lineNum":"   84","line":"///     2. integer literal (decimal, hexadecimal, octal, or binary)"},
{"lineNum":"   85","line":"///     3. floating point literal"},
{"lineNum":"   86","line":"///     4. character literal"},
{"lineNum":"   87","line":"///     5. string literal"},
{"lineNum":"   88","line":"///     6. jump keyword (\'unreachable\', \'break\', \'continue\', or \'return\')"},
{"lineNum":"   89","line":"///     7. closing delimeters (`)`, `]`, or `}`)"},
{"lineNum":"   90","line":"///     8. postfix operators (`^`)"},
{"lineNum":"   91","line":"fn trailing_comma_rules(tokens: *std.array_list.Managed(Token)) void {","class":"lineCov","hits":"2","order":"673","possible_hits":"2",},
{"lineNum":"   92","line":"    if (tokens.items.len < 4) {","class":"lineCov","hits":"1","order":"674","possible_hits":"1",},
{"lineNum":"   93","line":"        return;","class":"lineCov","hits":"1","order":"5704","possible_hits":"1",},
{"lineNum":"   94","line":"    }"},
{"lineNum":"   95","line":"    var i: usize = 0;","class":"lineCov","hits":"1","order":"675","possible_hits":"1",},
{"lineNum":"   96","line":"    while (i < tokens.items.len - 4) : (i += 1) {","class":"linePartCov","hits":"4","order":"676","possible_hits":"5",},
{"lineNum":"   97","line":"        if (tokens.items[i + 0].kind.is_end_token() and","class":"linePartCov","hits":"1","order":"677","possible_hits":"2",},
{"lineNum":"   98","line":"            (tokens.items[i + 1].kind == .comma) and","class":"lineCov","hits":"3","order":"683","possible_hits":"3",},
{"lineNum":"   99","line":"            tokens.items[i + 2].kind == .newline and","class":"lineCov","hits":"3","order":"684","possible_hits":"3",},
{"lineNum":"  100","line":"            tokens.items[i + 3].kind == .right_parenthesis)","class":"lineCov","hits":"3","order":"685","possible_hits":"3",},
{"lineNum":"  101","line":"        {"},
{"lineNum":"  102","line":"            _ = tokens.orderedRemove(i + 2); // Remove newline","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  103","line":"            i += 2;","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  104","line":"            std.debug.assert(tokens.items[i].kind == .right_parenthesis); // Make sure `i` is correct","class":"linePartCov","hits":"1","order":"686","possible_hits":"2",},
{"lineNum":"  105","line":"        }"},
{"lineNum":"  106","line":"    }"},
{"lineNum":"  107","line":"}"},
{"lineNum":"  108","line":""},
{"lineNum":"  109","line":"/// A newline token is removed if it is immediately surrounded by parenthesis. If"},
{"lineNum":"  110","line":"/// it is immediately surrounded by braces, it is removed when not preceded by the"},
{"lineNum":"  111","line":"/// following token kinds:"},
{"lineNum":"  112","line":"///     1. identifier (including `true` or `false`)"},
{"lineNum":"  113","line":"///     2. integer literal (decimal, hexadecimal, octal, or binary)"},
{"lineNum":"  114","line":"///     3. floating point literal"},
{"lineNum":"  115","line":"///     4. character literal"},
{"lineNum":"  116","line":"///     5. string literal"},
{"lineNum":"  117","line":"///     6. jump keywords (`unreachable`, `break`, `continue`, or `return`)"},
{"lineNum":"  118","line":"///     7. closing delimiters (`)`, `]`, or `}`)"},
{"lineNum":"  119","line":"///     8. postfix operators (`^`)"},
{"lineNum":"  120","line":"/// Or, if the newline is followed by an else keyword."},
{"lineNum":"  121","line":"/// Otherwise, the newline token is removed."},
{"lineNum":"  122","line":"fn newline_rules(tokens: *std.array_list.Managed(Token)) void {","class":"lineCov","hits":"2","order":"689","possible_hits":"2",},
{"lineNum":"  123","line":"    var stack = std.array_list.Managed(Token.Kind).init(tokens.allocator);","class":"lineCov","hits":"1","order":"690","possible_hits":"1",},
{"lineNum":"  124","line":"    defer stack.deinit();","class":"lineCov","hits":"1","order":"704","possible_hits":"1",},
{"lineNum":"  125","line":""},
{"lineNum":"  126","line":"    var i: usize = 0;","class":"lineCov","hits":"1","order":"691","possible_hits":"1",},
{"lineNum":"  127","line":"    while (i < tokens.items.len - 1) : (i += 1) {","class":"linePartCov","hits":"3","order":"692","possible_hits":"4",},
{"lineNum":"  128","line":"        // If token at `i` is a newline, ..."},
{"lineNum":"  129","line":"        const token = tokens.items[i];","class":"lineCov","hits":"3","order":"693","possible_hits":"3",},
{"lineNum":"  130","line":"        if (token.kind == .left_parenthesis or token.kind == .left_brace) {","class":"lineCov","hits":"2","order":"694","possible_hits":"2",},
{"lineNum":"  131","line":"            stack.append(token.kind) catch unreachable;","class":"lineCov","hits":"2","order":"699","possible_hits":"2",},
{"lineNum":"  132","line":"        } else if (token.kind == .right_parenthesis or token.kind == .right_brace and stack.items.len > 0) {","class":"lineCov","hits":"2","order":"695","possible_hits":"2",},
{"lineNum":"  133","line":"            _ = stack.pop();","class":"lineCov","hits":"1","order":"703","possible_hits":"1",},
{"lineNum":"  134","line":"        } else if (token.kind == .newline) {","class":"lineCov","hits":"1","order":"696","possible_hits":"1",},
{"lineNum":"  135","line":"            if (stack.items.len > 0 and stack.getLast() == .left_parenthesis) {","class":"lineCov","hits":"2","order":"700","possible_hits":"2",},
{"lineNum":"  136","line":"                // Remove if stack is not empty and l paren is on top of stack"},
{"lineNum":"  137","line":"                _ = tokens.orderedRemove(i);","class":"lineCov","hits":"1","order":"5942","possible_hits":"1",},
{"lineNum":"  138","line":"                i -|= 1;","class":"lineCov","hits":"1","order":"5943","possible_hits":"1",},
{"lineNum":"  139","line":"            } else if (i == 0 or !tokens.items[i - 1].kind.is_end_token() or tokens.items[i + 1].kind == .@\"else\") {","class":"lineCov","hits":"2","order":"701","possible_hits":"2",},
{"lineNum":"  140","line":"                // Remove newline if previous token was not a line-ending token"},
{"lineNum":"  141","line":"                _ = tokens.orderedRemove(i);","class":"lineCov","hits":"1","order":"702","possible_hits":"1",},
{"lineNum":"  142","line":"                i -|= 1;","class":"lineCov","hits":"7","order":"697","possible_hits":"7",},
{"lineNum":"  143","line":"            }"},
{"lineNum":"  144","line":"        }"},
{"lineNum":"  145","line":"    }","class":"lineCov","hits":"1","order":"698","possible_hits":"1",},
{"lineNum":"  146","line":"}"},
]};
var percent_low = 25;var percent_high = 75;
var header = { "command" : "orng-test", "date" : "2025-11-10 15:43:08", "instrumented" : 77, "covered" : 74,};
var merged_data = [];
