var data = {lines:[
{"lineNum":"    1","line":"//! This file defines type sets and directed acyclic graphs (Dependency_Nodes) for types. The type set is used"},
{"lineNum":"    2","line":"//! to store types based on their C-equivalence."},
{"lineNum":"    3","line":""},
{"lineNum":"    4","line":"const std = @import(\"std\");"},
{"lineNum":"    5","line":"const Dependency_Node = @import(\"dependency_node.zig\");"},
{"lineNum":"    6","line":"const Type_AST = @import(\"../types/type.zig\").Type_AST;"},
{"lineNum":"    7","line":""},
{"lineNum":"    8","line":"const Self = @This();"},
{"lineNum":"    9","line":""},
{"lineNum":"   10","line":"types: std.array_list.Managed(*Dependency_Node),"},
{"lineNum":"   11","line":"allocator: std.mem.Allocator,"},
{"lineNum":"   12","line":""},
{"lineNum":"   13","line":"pub fn init(allocator: std.mem.Allocator) Self {","class":"lineCov","hits":"1","order":"386","possible_hits":"1",},
{"lineNum":"   14","line":"    return Self{ .types = std.array_list.Managed(*Dependency_Node).init(allocator), .allocator = allocator };","class":"lineCov","hits":"1","order":"387","possible_hits":"1",},
{"lineNum":"   15","line":"}"},
{"lineNum":"   16","line":""},
{"lineNum":"   17","line":"pub fn deinit(self: *Self) void {"},
{"lineNum":"   18","line":"    self.types.deinit();"},
{"lineNum":"   19","line":"}"},
{"lineNum":"   20","line":""},
{"lineNum":"   21","line":"/// Adds a type to the type set. Returns the dependency node for the corresponding type"},
{"lineNum":"   22","line":"pub fn add_type(self: *Self, oldast_: *Type_AST) ?*Dependency_Node {","class":"lineCov","hits":"2","order":"4128","possible_hits":"2",},
{"lineNum":"   23","line":"    return self.add_internal(oldast_, false);","class":"lineCov","hits":"1","order":"4129","possible_hits":"1",},
{"lineNum":"   24","line":"}"},
{"lineNum":"   25","line":""},
{"lineNum":"   26","line":"fn add_internal(self: *Self, oldast_: *Type_AST, from_function: bool) ?*Dependency_Node {","class":"lineCov","hits":"2","order":"4130","possible_hits":"2",},
{"lineNum":"   27","line":"    const ast = oldast_.expand_identifier();","class":"lineCov","hits":"1","order":"4131","possible_hits":"1",},
{"lineNum":"   28","line":"    // std.debug.print(\"{f}\\n\", .{ast});"},
{"lineNum":"   29","line":"    std.debug.assert(ast.* != .identifier or ast.symbol().?.decl.?.* != .type_param_decl);","class":"lineCov","hits":"2","order":"4132","possible_hits":"2",},
{"lineNum":"   30","line":""},
{"lineNum":"   31","line":"    if (self.get_node(ast)) |dag| {","class":"lineCov","hits":"2","order":"4133","possible_hits":"2",},
{"lineNum":"   32","line":"        // Type is already in the set, return Dependency_Node entry for it"},
{"lineNum":"   33","line":"        return dag;","class":"lineCov","hits":"1","order":"4192","possible_hits":"1",},
{"lineNum":"   34","line":"    }"},
{"lineNum":"   35","line":""},
{"lineNum":"   36","line":"    // Type wasn\'t in the set, so we\'ll need to create a Dependency_Node for it and its children"},
{"lineNum":"   37","line":"    switch (ast.*) {","class":"linePartCov","hits":"1","order":"4139","possible_hits":"3",},
{"lineNum":"   38","line":"        .function => return self.add_function(ast),","class":"lineCov","hits":"1","order":"4140","possible_hits":"1",},
{"lineNum":"   39","line":"        .struct_type, .tuple_type, .enum_type, .untagged_sum_type, .context_type => return self.add_aggregate(ast),","class":"lineCov","hits":"1","order":"4162","possible_hits":"1",},
{"lineNum":"   40","line":"        .dyn_type => return self.add_dependency_node(ast),","class":"lineCov","hits":"1","order":"4201","possible_hits":"1",},
{"lineNum":"   41","line":"        .annotation => return self.add_type(ast.child()),","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   42","line":"        .addr_of => {"},
{"lineNum":"   43","line":"            const retval = self.add_type(ast.child());","class":"lineCov","hits":"1","order":"4167","possible_hits":"1",},
{"lineNum":"   44","line":"            if (from_function) {","class":"lineCov","hits":"1","order":"4168","possible_hits":"1",},
{"lineNum":"   45","line":"                return retval;","class":"lineCov","hits":"1","order":"4196","possible_hits":"1",},
{"lineNum":"   46","line":"            } else {"},
{"lineNum":"   47","line":"                return null;","class":"lineCov","hits":"1","order":"4169","possible_hits":"1",},
{"lineNum":"   48","line":"            }"},
{"lineNum":"   49","line":"        },"},
{"lineNum":"   50","line":"        .array_of => return self.add_array(ast),","class":"lineCov","hits":"1","order":"4222","possible_hits":"1",},
{"lineNum":"   51","line":"        .identifier, .unit_type, .anyptr_type => return null, // Do not add to Dependency_Node","class":"lineCov","hits":"1","order":"4158","possible_hits":"1",},
{"lineNum":"   52","line":"        else => std.debug.panic(\"error: cannot add unknown typekind `{t}` to set\", .{ast.*}),","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   53","line":"    }"},
{"lineNum":"   54","line":"}"},
{"lineNum":"   55","line":""},
{"lineNum":"   56","line":"/// Adds a function type to the type set"},
{"lineNum":"   57","line":"fn add_function(self: *Self, function_type_ast: *Type_AST) ?*Dependency_Node {","class":"lineCov","hits":"2","order":"4141","possible_hits":"2",},
{"lineNum":"   58","line":"    var dag = self.add_dependency_node(function_type_ast);","class":"lineCov","hits":"1","order":"4142","possible_hits":"1",},
{"lineNum":"   59","line":"    if (function_type_ast.lhs().* == .tuple_type) {","class":"lineCov","hits":"2","order":"4154","possible_hits":"2",},
{"lineNum":"   60","line":"        for (function_type_ast.lhs().children().items) |c| {","class":"lineCov","hits":"3","order":"4155","possible_hits":"3",},
{"lineNum":"   61","line":"            if (self.add_internal(c, true)) |domain| {","class":"lineCov","hits":"2","order":"4156","possible_hits":"2",},
{"lineNum":"   62","line":"                dag.add_dependency(domain);","class":"lineCov","hits":"2","order":"4159","possible_hits":"2",},
{"lineNum":"   63","line":"            }"},
{"lineNum":"   64","line":"        }","class":"lineCov","hits":"4","order":"4160","possible_hits":"4",},
{"lineNum":"   65","line":"    } else {"},
{"lineNum":"   66","line":"        if (self.add_internal(function_type_ast.lhs(), true)) |domain| {","class":"linePartCov","hits":"1","order":"4199","possible_hits":"2",},
{"lineNum":"   67","line":"            dag.add_dependency(domain);","class":"linePartCov","hits":"2","order":"4200","possible_hits":"3",},
{"lineNum":"   68","line":"        }"},
{"lineNum":"   69","line":"    }"},
{"lineNum":"   70","line":"    if (self.add_type(function_type_ast.rhs())) |codomain| {","class":"lineCov","hits":"2","order":"4161","possible_hits":"2",},
{"lineNum":"   71","line":"        dag.add_dependency(codomain);","class":"lineCov","hits":"3","order":"4173","possible_hits":"3",},
{"lineNum":"   72","line":"    }"},
{"lineNum":"   73","line":"    for (function_type_ast.function.contexts.items) |ctx| {","class":"linePartCov","hits":"3","order":"4176","possible_hits":"4",},
{"lineNum":"   74","line":"        if (self.add_type(ctx.child())) |context_node| {","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"   75","line":"            dag.add_dependency(context_node);","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"   76","line":"        }"},
{"lineNum":"   77","line":"    }","class":"linePartCov","hits":"1","order":"4177","possible_hits":"3",},
{"lineNum":"   78","line":"    return dag;","class":"lineCov","hits":"1","order":"4178","possible_hits":"1",},
{"lineNum":"   79","line":"}"},
{"lineNum":"   80","line":""},
{"lineNum":"   81","line":"/// Adds an aggregate type (product, sum) to the type set"},
{"lineNum":"   82","line":"fn add_aggregate(self: *Self, aggregate_ast: *Type_AST) ?*Dependency_Node {","class":"lineCov","hits":"2","order":"4163","possible_hits":"2",},
{"lineNum":"   83","line":"    var dag = self.add_dependency_node(aggregate_ast);","class":"lineCov","hits":"1","order":"4164","possible_hits":"1",},
{"lineNum":"   84","line":"    for (aggregate_ast.children().items) |term| {","class":"lineCov","hits":"3","order":"4165","possible_hits":"3",},
{"lineNum":"   85","line":"        if (self.add_type(term)) |dependency| {","class":"lineCov","hits":"2","order":"4166","possible_hits":"2",},
{"lineNum":"   86","line":"            if (term.* != .addr_of)","class":"lineCov","hits":"1","order":"4221","possible_hits":"1",},
{"lineNum":"   87","line":"                dag.add_dependency(dependency);","class":"linePartCov","hits":"2","order":"4170","possible_hits":"3",},
{"lineNum":"   88","line":"        }"},
{"lineNum":"   89","line":"    }","class":"lineCov","hits":"3","order":"4171","possible_hits":"3",},
{"lineNum":"   90","line":"    return dag;","class":"lineCov","hits":"1","order":"4172","possible_hits":"1",},
{"lineNum":"   91","line":"}"},
{"lineNum":"   92","line":""},
{"lineNum":"   93","line":"/// Adds a function type to the type set"},
{"lineNum":"   94","line":"fn add_array(self: *Self, array_type_ast: *Type_AST) ?*Dependency_Node {","class":"lineCov","hits":"2","order":"4223","possible_hits":"2",},
{"lineNum":"   95","line":"    var dag = self.add_dependency_node(array_type_ast);","class":"lineCov","hits":"1","order":"4224","possible_hits":"1",},
{"lineNum":"   96","line":"    if (self.add_type(array_type_ast.child())) |domain| {","class":"lineCov","hits":"2","order":"4225","possible_hits":"2",},
{"lineNum":"   97","line":"        dag.add_dependency(domain);","class":"linePartCov","hits":"1","order":"4227","possible_hits":"2",},
{"lineNum":"   98","line":"    }"},
{"lineNum":"   99","line":"    return dag;","class":"lineCov","hits":"1","order":"4228","possible_hits":"1",},
{"lineNum":"  100","line":"}"},
{"lineNum":"  101","line":""},
{"lineNum":"  102","line":"/// Performs A = A U B"},
{"lineNum":"  103","line":"pub fn union_from(self: *Self, other: *const Self) void {","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  104","line":"    for (other.types.items) |_type| {","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"  105","line":"        _ = self.add_type(_type.base);","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  106","line":"    }","class":"lineNoCov","hits":"0","possible_hits":"4",},
{"lineNum":"  107","line":"}"},
{"lineNum":"  108","line":""},
{"lineNum":"  109","line":"/// Retrieves the dependency node from the type set given a type"},
{"lineNum":"  110","line":"pub fn get_node(self: *const Self, oldast_: *Type_AST) ?*Dependency_Node {","class":"lineCov","hits":"2","order":"4134","possible_hits":"2",},
{"lineNum":"  111","line":"    const ast = oldast_.expand_identifier();","class":"lineCov","hits":"1","order":"4135","possible_hits":"1",},
{"lineNum":"  112","line":"    for (self.types.items) |dag| {","class":"lineCov","hits":"3","order":"4136","possible_hits":"3",},
{"lineNum":"  113","line":"        if (dag.base.c_types_match(ast)) {","class":"lineCov","hits":"1","order":"4157","possible_hits":"1",},
{"lineNum":"  114","line":"            return dag;","class":"lineCov","hits":"1","order":"4191","possible_hits":"1",},
{"lineNum":"  115","line":"        }"},
{"lineNum":"  116","line":"    }","class":"lineCov","hits":"3","order":"4137","possible_hits":"3",},
{"lineNum":"  117","line":"    return null;","class":"lineCov","hits":"1","order":"4138","possible_hits":"1",},
{"lineNum":"  118","line":"}"},
{"lineNum":"  119","line":""},
{"lineNum":"  120","line":"/// Debug function to print out the type set"},
{"lineNum":"  121","line":"pub fn print(self: *Self) void {"},
{"lineNum":"  122","line":"    for (self.types.items) |dag| {"},
{"lineNum":"  123","line":"        dag.print();"},
{"lineNum":"  124","line":"    }"},
{"lineNum":"  125","line":"}"},
{"lineNum":"  126","line":""},
{"lineNum":"  127","line":"fn add_dependency_node(self: *Self, ast: *Type_AST) *Dependency_Node {","class":"lineCov","hits":"2","order":"4143","possible_hits":"2",},
{"lineNum":"  128","line":"    const dag = Dependency_Node.init(ast, self.types.items.len, self.allocator);","class":"lineCov","hits":"1","order":"4144","possible_hits":"1",},
{"lineNum":"  129","line":"    self.types.append(dag) catch unreachable;","class":"lineCov","hits":"2","order":"4152","possible_hits":"2",},
{"lineNum":"  130","line":"    return dag;","class":"lineCov","hits":"1","order":"4153","possible_hits":"1",},
{"lineNum":"  131","line":"}"},
{"lineNum":"  132","line":""},
{"lineNum":"  133","line":"pub fn len(self: *const Self) usize {"},
{"lineNum":"  134","line":"    return self.types.items.len;"},
{"lineNum":"  135","line":"}"},
{"lineNum":"  136","line":""},
{"lineNum":"  137","line":"/// Prints out the graphviz representation for the type set"},
{"lineNum":"  138","line":"pub fn graphviz(self: *const Self) void {"},
{"lineNum":"  139","line":"    for (self.types.items) |dep| {"},
{"lineNum":"  140","line":"        dep.graphviz();"},
{"lineNum":"  141","line":"    }"},
{"lineNum":"  142","line":"}"},
]};
var percent_low = 25;var percent_high = 75;
var header = { "command" : "orng-test", "date" : "2025-11-10 15:43:08", "instrumented" : 65, "covered" : 57,};
var merged_data = [];
