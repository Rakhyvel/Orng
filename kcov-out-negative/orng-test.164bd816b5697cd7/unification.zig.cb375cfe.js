var data = {lines:[
{"lineNum":"    1","line":"const std = @import(\"std\");"},
{"lineNum":"    2","line":"const ast_ = @import(\"../ast/ast.zig\");"},
{"lineNum":"    3","line":"const Type_AST = @import(\"../types/type.zig\").Type_AST;"},
{"lineNum":"    4","line":""},
{"lineNum":"    5","line":"pub const Substitutions = std.StringArrayHashMap(*Type_AST);"},
{"lineNum":"    6","line":""},
{"lineNum":"    7","line":"// Attempt to match the rhs with the lhs"},
{"lineNum":"    8","line":"pub fn unify(lhs: *Type_AST, rhs: *Type_AST, withs: std.array_list.Managed(*ast_.AST), subst: *Substitutions) !void {","class":"lineCov","hits":"2","order":"5405","possible_hits":"2",},
{"lineNum":"    9","line":"    // std.debug.print(\"{f} ~ {f}\\n\", .{ lhs, rhs });"},
{"lineNum":"   10","line":"    if (lhs.* == .identifier and lhs.symbol().?.init_typedef() != null) {","class":"lineCov","hits":"2","order":"5406","possible_hits":"2",},
{"lineNum":"   11","line":"        return try unify(lhs.symbol().?.init_typedef().?, rhs, withs, subst);","class":"lineCov","hits":"2","order":"6336","possible_hits":"2",},
{"lineNum":"   12","line":"    } else if (rhs.* == .identifier and rhs.symbol().?.init_typedef() != null) {","class":"lineCov","hits":"2","order":"5407","possible_hits":"2",},
{"lineNum":"   13","line":"        return try unify(lhs, rhs.symbol().?.init_typedef().?, withs, subst);","class":"lineCov","hits":"2","order":"5408","possible_hits":"2",},
{"lineNum":"   14","line":"    }"},
{"lineNum":"   15","line":""},
{"lineNum":"   16","line":"    if (rhs.* == .access and rhs.symbol().?.init_typedef() != null) {","class":"lineCov","hits":"2","order":"5409","possible_hits":"2",},
{"lineNum":"   17","line":"        return try unify(lhs, rhs.symbol().?.init_typedef().?, withs, subst);","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   18","line":"    }"},
{"lineNum":"   19","line":""},
{"lineNum":"   20","line":"    switch (lhs.*) {","class":"linePartCov","hits":"1","order":"5410","possible_hits":"3",},
{"lineNum":"   21","line":"        .identifier => {"},
{"lineNum":"   22","line":"            std.debug.assert(lhs.token().data.len > 0);","class":"lineCov","hits":"1","order":"5419","possible_hits":"1",},
{"lineNum":"   23","line":"            if (identifier_is_type_param(lhs, withs)) |_| {","class":"lineCov","hits":"1","order":"5420","possible_hits":"1",},
{"lineNum":"   24","line":"                try subst.put(lhs.token().data, rhs);","class":"linePartCov","hits":"1","order":"5425","possible_hits":"2",},
{"lineNum":"   25","line":"                return;","class":"lineCov","hits":"2","order":"5426","possible_hits":"2",},
{"lineNum":"   26","line":"            }"},
{"lineNum":"   27","line":""},
{"lineNum":"   28","line":"            if (rhs.* != .identifier or !std.mem.eql(u8, lhs.token().data, rhs.token().data)) {","class":"lineCov","hits":"2","order":"6339","possible_hits":"2",},
{"lineNum":"   29","line":"                return error.TypesMismatch;","class":"linePartCov","hits":"1","order":"6340","possible_hits":"2",},
{"lineNum":"   30","line":"            }"},
{"lineNum":"   31","line":"        },"},
{"lineNum":"   32","line":""},
{"lineNum":"   33","line":"        .struct_type => {"},
{"lineNum":"   34","line":"            if (rhs.* != .struct_type) {","class":"lineCov","hits":"1","order":"6357","possible_hits":"1",},
{"lineNum":"   35","line":"                return error.TypesMismatch;","class":"lineCov","hits":"1","order":"6358","possible_hits":"1",},
{"lineNum":"   36","line":"            }"},
{"lineNum":"   37","line":"            if (lhs.children().items.len != rhs.children().items.len) {","class":"lineCov","hits":"1","order":"6479","possible_hits":"1",},
{"lineNum":"   38","line":"                return error.TypesMismatch;","class":"linePartCov","hits":"1","order":"6480","possible_hits":"2",},
{"lineNum":"   39","line":"            }"},
{"lineNum":"   40","line":""},
{"lineNum":"   41","line":"            for (lhs.children().items, rhs.children().items) |l_arg, r_arg| {","class":"lineCov","hits":"4","order":"6481","possible_hits":"4",},
{"lineNum":"   42","line":"                try unify(l_arg, r_arg, withs, subst);","class":"linePartCov","hits":"1","order":"6482","possible_hits":"2",},
{"lineNum":"   43","line":"            }","class":"lineCov","hits":"4","order":"6485","possible_hits":"4",},
{"lineNum":"   44","line":"        },"},
{"lineNum":"   45","line":""},
{"lineNum":"   46","line":"        .annotation => {"},
{"lineNum":"   47","line":"            if (rhs.* != .annotation) {","class":"lineCov","hits":"1","order":"6483","possible_hits":"1",},
{"lineNum":"   48","line":"                return error.TypesMismatch;","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   49","line":"            }"},
{"lineNum":"   50","line":""},
{"lineNum":"   51","line":"            try unify(lhs.child(), rhs.child(), withs, subst);","class":"linePartCov","hits":"1","order":"6484","possible_hits":"2",},
{"lineNum":"   52","line":"        },"},
{"lineNum":"   53","line":""},
{"lineNum":"   54","line":"        .unit_type => {"},
{"lineNum":"   55","line":"            if (rhs.* != .unit_type) {","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   56","line":"                return error.TypesMismatch;","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   57","line":"            }"},
{"lineNum":"   58","line":"        },"},
{"lineNum":"   59","line":""},
{"lineNum":"   60","line":"        .generic_apply => {"},
{"lineNum":"   61","line":"            if (rhs.* != .generic_apply) {","class":"lineCov","hits":"1","order":"5411","possible_hits":"1",},
{"lineNum":"   62","line":"                return error.TypesMismatch;","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   63","line":"            }"},
{"lineNum":"   64","line":"            const lhs_constructor = lhs.lhs();","class":"lineCov","hits":"1","order":"5412","possible_hits":"1",},
{"lineNum":"   65","line":"            const rhs_constructor = rhs.lhs();","class":"lineCov","hits":"1","order":"5413","possible_hits":"1",},
{"lineNum":"   66","line":"            if (!std.mem.eql(u8, lhs_constructor.token().data, rhs_constructor.token().data)) {","class":"lineCov","hits":"1","order":"5414","possible_hits":"1",},
{"lineNum":"   67","line":"                return error.TypesMismatch;","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   68","line":"            }"},
{"lineNum":"   69","line":"            if (lhs.children().items.len != rhs.children().items.len) {","class":"lineCov","hits":"1","order":"5415","possible_hits":"1",},
{"lineNum":"   70","line":"                return error.TypesMismatch;","class":"linePartCov","hits":"1","order":"5416","possible_hits":"2",},
{"lineNum":"   71","line":"            }"},
{"lineNum":"   72","line":""},
{"lineNum":"   73","line":"            for (lhs.children().items, rhs.children().items) |l_arg, r_arg| {","class":"lineCov","hits":"4","order":"5417","possible_hits":"4",},
{"lineNum":"   74","line":"                try unify(l_arg, r_arg, withs, subst);","class":"linePartCov","hits":"1","order":"5418","possible_hits":"2",},
{"lineNum":"   75","line":"            }","class":"lineCov","hits":"4","order":"5427","possible_hits":"4",},
{"lineNum":"   76","line":"        },"},
{"lineNum":"   77","line":""},
{"lineNum":"   78","line":"        else => return, // TODO: Support more types, add error for unsupported constructs","class":"linePartCov","hits":"1","order":"5428","possible_hits":"2",},
{"lineNum":"   79","line":"    }"},
{"lineNum":"   80","line":"}"},
{"lineNum":"   81","line":""},
{"lineNum":"   82","line":"pub fn type_param_list_from_subst_map(subst: *Substitutions, generic_params: std.array_list.Managed(*ast_.AST), alloc: std.mem.Allocator) std.array_list.Managed(*Type_AST) {","class":"lineCov","hits":"2","order":"5440","possible_hits":"2",},
{"lineNum":"   83","line":"    var retval = std.array_list.Managed(*Type_AST).init(alloc);","class":"lineCov","hits":"1","order":"5441","possible_hits":"1",},
{"lineNum":"   84","line":"    for (generic_params.items) |type_param| {","class":"lineCov","hits":"3","order":"5442","possible_hits":"3",},
{"lineNum":"   85","line":"        const with_value = subst.get(type_param.token().data).?;","class":"lineCov","hits":"3","order":"5443","possible_hits":"3",},
{"lineNum":"   86","line":"        retval.append(with_value) catch unreachable;","class":"lineCov","hits":"2","order":"5444","possible_hits":"2",},
{"lineNum":"   87","line":"    }","class":"lineCov","hits":"3","order":"5445","possible_hits":"3",},
{"lineNum":"   88","line":"    return retval;","class":"lineCov","hits":"1","order":"5446","possible_hits":"1",},
{"lineNum":"   89","line":"}"},
{"lineNum":"   90","line":""},
{"lineNum":"   91","line":"fn identifier_is_type_param(ident: *Type_AST, generic_params: std.array_list.Managed(*ast_.AST)) ?*ast_.AST {","class":"lineCov","hits":"2","order":"5421","possible_hits":"2",},
{"lineNum":"   92","line":"    for (generic_params.items) |type_param| {","class":"lineCov","hits":"3","order":"5422","possible_hits":"3",},
{"lineNum":"   93","line":"        if (std.mem.eql(u8, type_param.token().data, ident.token().data)) {","class":"lineCov","hits":"1","order":"5423","possible_hits":"1",},
{"lineNum":"   94","line":"            return type_param;","class":"lineCov","hits":"1","order":"5424","possible_hits":"1",},
{"lineNum":"   95","line":"        }"},
{"lineNum":"   96","line":"    }","class":"linePartCov","hits":"1","order":"6337","possible_hits":"3",},
{"lineNum":"   97","line":"    return null;","class":"lineCov","hits":"1","order":"6338","possible_hits":"1",},
{"lineNum":"   98","line":"}"},
{"lineNum":"   99","line":""},
{"lineNum":"  100","line":"pub fn substitution_contains_generics(subst: *const Substitutions) bool {","class":"lineCov","hits":"2","order":"5430","possible_hits":"2",},
{"lineNum":"  101","line":"    for (subst.keys()) |key| {","class":"lineCov","hits":"3","order":"5431","possible_hits":"3",},
{"lineNum":"  102","line":"        const ty = subst.get(key).?;","class":"lineCov","hits":"3","order":"5432","possible_hits":"3",},
{"lineNum":"  103","line":"        const bad = ty.* == .identifier and ty.symbol().?.decl.?.* == .type_param_decl;","class":"lineCov","hits":"3","order":"5433","possible_hits":"3",},
{"lineNum":"  104","line":"        if (bad) {","class":"lineCov","hits":"1","order":"5434","possible_hits":"1",},
{"lineNum":"  105","line":"            return true;","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  106","line":"        }"},
{"lineNum":"  107","line":"    }","class":"lineCov","hits":"3","order":"5435","possible_hits":"3",},
{"lineNum":"  108","line":"    return false;","class":"lineCov","hits":"1","order":"5436","possible_hits":"1",},
{"lineNum":"  109","line":"}"},
{"lineNum":"  110","line":""},
{"lineNum":"  111","line":"pub fn print_substitutions(subst: *const Substitutions) void {"},
{"lineNum":"  112","line":"    std.debug.print(\"{} substitutions: {{\\n\", .{subst.keys().len});"},
{"lineNum":"  113","line":"    for (subst.keys()) |key| {"},
{"lineNum":"  114","line":"        const ty = subst.get(key).?;"},
{"lineNum":"  115","line":"        const bad = ty.* == .identifier and ty.symbol().?.decl.?.* == .type_param_decl;"},
{"lineNum":"  116","line":"        std.debug.print(\"    {s}: {?f} ({})\\n\", .{ key, subst.get(key), bad });"},
{"lineNum":"  117","line":"    }"},
{"lineNum":"  118","line":"    std.debug.print(\"}}\\n\", .{});"},
{"lineNum":"  119","line":"}"},
]};
var percent_low = 25;var percent_high = 75;
var header = { "command" : "orng-test", "date" : "2025-11-10 15:43:08", "instrumented" : 59, "covered" : 52,};
var merged_data = [];
