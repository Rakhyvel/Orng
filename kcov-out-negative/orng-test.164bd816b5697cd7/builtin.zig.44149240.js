var data = {lines:[
{"lineNum":"    1","line":"const std = @import(\"std\");"},
{"lineNum":"    2","line":"const AST = @import(\"../ast/ast.zig\").AST;"},
{"lineNum":"    3","line":"const Compiler_Context = @import(\"../hierarchy/compiler.zig\");"},
{"lineNum":"    4","line":"const core_ = @import(\"../hierarchy/core.zig\");"},
{"lineNum":"    5","line":"const Interpreter_Context = @import(\"../interpretation/interpreter.zig\");"},
{"lineNum":"    6","line":"const lval_ = @import(\"../ir/lval.zig\");"},
{"lineNum":"    7","line":"const repo_ = @import(\"../util/repo.zig\");"},
{"lineNum":"    8","line":"const String = @import(\"../zig-string/zig-string.zig\").String;"},
{"lineNum":"    9","line":""},
{"lineNum":"   10","line":"const Error: type = error{ LexerError, ParseError, CompileError, FileNotFound, OutOfMemory };"},
{"lineNum":"   11","line":""},
{"lineNum":"   12","line":"const Package_Find_Result = struct { package_adrs: i64, package_dirname: []const u8 };"},
{"lineNum":"   13","line":""},
{"lineNum":"   14","line":"/// Implements the Package::find method at build-time. Takes in a string representing the name of"},
{"lineNum":"   15","line":"/// the package in the Orange cache, and returns an AST representing the package."},
{"lineNum":"   16","line":"pub fn package_find(compiler: *Compiler_Context, interpreter: *Interpreter_Context, current_module_path: []const u8, package_src: *AST) Error!Package_Find_Result {","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"   17","line":"    // Construct the path to the package\'s `build.orng` file"},
{"lineNum":"   18","line":"    const package_absolute_path = switch (package_src.pos().?) {","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   19","line":"        0 => try package_find_relative(current_module_path, package_src.enum_value.init.?, compiler.allocator()),","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"   20","line":"        1 => try package_find_git(compiler, package_src.enum_value.init.?),","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"   21","line":"        else => unreachable,","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"   22","line":"    };"},
{"lineNum":"   23","line":""},
{"lineNum":"   24","line":"    const package_build_paths = [_][]const u8{ package_absolute_path, \"build.orng\" };","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   25","line":"    const package_build_path = std.fs.path.join(compiler.allocator(), &package_build_paths) catch unreachable;","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"   26","line":""},
{"lineNum":"   27","line":"    const path_buffer = compiler.allocator().alloc(u8, std.fs.max_path_bytes) catch unreachable;","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"   28","line":"    const package_build_absolute_path = std.fs.cwd().realpath(package_build_path, path_buffer) catch return error.CompileError;","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"   29","line":""},
{"lineNum":"   30","line":"    // Compile the package\'s `build.orng` file"},
{"lineNum":"   31","line":"    const build_cfg = try compiler.compile_build_file(package_build_absolute_path);","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"   32","line":"    interpreter.load_module(build_cfg.symbol.scope.module.?);","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"   33","line":""},
{"lineNum":"   34","line":"    // Allocate space for the package to be placed"},
{"lineNum":"   35","line":"    const package_len: usize = @intCast(core_.package_type.sizeof());","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"   36","line":"    const adrs: i64 = @intCast(try interpreter.alloc(@intCast(package_len), 8));","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   37","line":"    const retval_place = lval_.L_Value.create_raw_address_lval(adrs, compiler.allocator());","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   38","line":""},
{"lineNum":"   39","line":"    // Jump to the `build()` fn"},
{"lineNum":"   40","line":"    try interpreter.call(build_cfg.symbol, retval_place, std.array_list.Managed(*lval_.L_Value).init(compiler.allocator()));","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   41","line":"    try interpreter.run();","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   42","line":""},
{"lineNum":"   43","line":"    return .{ .package_adrs = adrs, .package_dirname = package_absolute_path };","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   44","line":"}"},
{"lineNum":"   45","line":""},
{"lineNum":"   46","line":"fn package_find_relative(current_module_path: []const u8, package_src: *AST, allocator: std.mem.Allocator) Error![]const u8 {","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"   47","line":"    const package_path = package_src.string.data;","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"   48","line":""},
{"lineNum":"   49","line":"    const current_package = std.fs.path.dirname(current_module_path).?;","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"   50","line":"    const required_package_paths = [_][]const u8{ current_package, package_path };","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   51","line":"    const required_package_path = std.fs.path.join(allocator, &required_package_paths) catch unreachable;","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"   52","line":""},
{"lineNum":"   53","line":"    const package_buffer = allocator.alloc(u8, std.fs.max_path_bytes) catch unreachable;","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"   54","line":"    return std.fs.cwd().realpath(required_package_path, package_buffer) catch return error.CompileError;","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"   55","line":"}"},
{"lineNum":"   56","line":""},
{"lineNum":"   57","line":"/// Implements `core::Package::find` for the git variant"},
{"lineNum":"   58","line":"fn package_find_git(compiler: *Compiler_Context, package_src: *AST) Error![]const u8 {","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"   59","line":"    const git_source_type = compiler.get_core_type(\"Git_Source\");","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   60","line":"    const url = package_src.get_field(git_source_type, \"url\");","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   61","line":"    const subdir = package_src.get_field(git_source_type, \"subdir\");","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   62","line":""},
{"lineNum":"   63","line":"    try repo_.git_clone(url.string.data, compiler.allocator());","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   64","line":""},
{"lineNum":"   65","line":"    const repo_dir = repo_.get_packages_dir(compiler.allocator());","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   66","line":"    var dirs = std.array_list.Managed([]const u8).init(compiler.allocator());","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   67","line":"    defer dirs.deinit();","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   68","line":"    dirs.append(repo_dir) catch unreachable;","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"   69","line":"    dirs.append(std.fs.path.basename(url.string.data)) catch unreachable;","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"   70","line":"    if (subdir.string.data.len > 0) {","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"   71","line":"        // This has to be done so that package absolute paths have one canonical representation, even on Windows"},
{"lineNum":"   72","line":"        var subdir_string = String.init_with_contents(compiler.allocator(), subdir.string.data) catch unreachable;","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"   73","line":"        const os_sep: [1]u8 = [1]u8{std.fs.path.sep};"},
{"lineNum":"   74","line":"        _ = subdir_string.replace(\"/\", &os_sep) catch unreachable;","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"   75","line":"        dirs.append((subdir_string.toOwned() catch unreachable).?) catch unreachable;","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"   76","line":"    }"},
{"lineNum":"   77","line":"    return std.fs.path.join(compiler.allocator(), dirs.items) catch unreachable;","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"   78","line":"}"},
]};
var percent_low = 25;var percent_high = 75;
var header = { "command" : "orng-test", "date" : "2025-11-10 15:43:08", "instrumented" : 39, "covered" : 0,};
var merged_data = [];
