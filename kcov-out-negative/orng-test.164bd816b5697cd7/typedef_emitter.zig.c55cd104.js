var data = {lines:[
{"lineNum":"    1","line":"// This file contains the implementation of the Orange compiler\'s C code generator."},
{"lineNum":"    2","line":""},
{"lineNum":"    3","line":"const std = @import(\"std\");"},
{"lineNum":"    4","line":"const Emitter = @import(\"emitter.zig\");"},
{"lineNum":"    5","line":"const Dependency_Node = @import(\"../ast/dependency_node.zig\");"},
{"lineNum":"    6","line":"const Type_AST = @import(\"../types/type.zig\").Type_AST;"},
{"lineNum":"    7","line":"const Canonical_Type_Fmt = @import(\"../types/canonical_type_fmt.zig\");"},
{"lineNum":"    8","line":""},
{"lineNum":"    9","line":"const Self = @This();"},
{"lineNum":"   10","line":""},
{"lineNum":"   11","line":"emitter: Emitter,"},
{"lineNum":"   12","line":"dep: *Dependency_Node,"},
{"lineNum":"   13","line":"writer: *std.array_list.Managed(u8),"},
{"lineNum":"   14","line":""},
{"lineNum":"   15","line":"pub const CodeGen_Error = error{ WriteFailed, OutOfMemory };"},
{"lineNum":"   16","line":""},
{"lineNum":"   17","line":"pub fn init(dep: *Dependency_Node, writer: *std.array_list.Managed(u8)) Self {","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"   18","line":"    const emitter = Emitter.init(writer);","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   19","line":"    return Self{ .emitter = emitter, .dep = dep, .writer = writer };","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   20","line":"}"},
{"lineNum":"   21","line":""},
{"lineNum":"   22","line":"/// Generates the header file for the given module"},
{"lineNum":"   23","line":"pub fn generate(self: *Self) CodeGen_Error!void {","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"   24","line":"    try self.output_include_guard_begin();","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   25","line":"    try self.output_dependencies();","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   26","line":"    try self.output_typedef();","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   27","line":"    try self.output_include_guard_end();","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   28","line":"}"},
{"lineNum":"   29","line":""},
{"lineNum":"   30","line":"fn output_include_guard_begin(self: *Self) CodeGen_Error!void {","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"   31","line":"    try self.writer.print(","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"   32","line":"        \\\\/* Code generated using the Orange compiler http://ornglang.org */"},
{"lineNum":"   33","line":"        \\\\"},
{"lineNum":"   34","line":"        \\\\#ifndef {0f}_H"},
{"lineNum":"   35","line":"        \\\\#define {0f}_H"},
{"lineNum":"   36","line":"        \\\\"},
{"lineNum":"   37","line":"        \\\\"},
{"lineNum":"   38","line":"    , .{Canonical_Type_Fmt{ .type = self.dep.base, .case = .upper }});","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   39","line":"}"},
{"lineNum":"   40","line":""},
{"lineNum":"   41","line":"fn output_dependencies(self: *Self) CodeGen_Error!void {","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"   42","line":"    for (self.dep.dependencies.items) |depen| {","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"   43","line":"        switch (depen.base.*) {","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"   44","line":"            .struct_type,"},
{"lineNum":"   45","line":"            .context_type,"},
{"lineNum":"   46","line":"            .tuple_type,"},
{"lineNum":"   47","line":"            .array_of,"},
{"lineNum":"   48","line":"            .enum_type,"},
{"lineNum":"   49","line":"            .dyn_type,"},
{"lineNum":"   50","line":"            => {"},
{"lineNum":"   51","line":"                try self.writer.print(\"struct {f};\\n\", .{Canonical_Type_Fmt{ .type = depen.base }});","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"   52","line":"            },"},
{"lineNum":"   53","line":"            .untagged_sum_type => try self.writer.print(\"union {f};\\n\", .{Canonical_Type_Fmt{ .type = depen.base }}),","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"   54","line":"            else => {},"},
{"lineNum":"   55","line":"        }"},
{"lineNum":"   56","line":"    }","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"   57","line":"    if (self.dep.dependencies.items.len > 0) {","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   58","line":"        try self.writer.print(\"\\n\", .{});","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"   59","line":"    }"},
{"lineNum":"   60","line":"}"},
{"lineNum":"   61","line":""},
{"lineNum":"   62","line":"fn output_include_guard_end(self: *Self) CodeGen_Error!void {","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"   63","line":"    try self.writer.print(","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   64","line":"        \\\\#endif"},
{"lineNum":"   65","line":"        \\\\"},
{"lineNum":"   66","line":"    , .{});"},
{"lineNum":"   67","line":"}"},
{"lineNum":"   68","line":""},
{"lineNum":"   69","line":"/// Outputs a typedef declaration based on the provided `DAG`."},
{"lineNum":"   70","line":"fn output_typedef(self: *Self) CodeGen_Error!void {","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"   71","line":"    if (self.dep.base.* == .function) {","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   72","line":"        const has_contexts = self.dep.base.function.contexts.items.len > 0;","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"   73","line":"        const has_params = self.dep.base.lhs().* != .unit_type;","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   74","line":""},
{"lineNum":"   75","line":"        try self.writer.print(\"typedef \", .{});","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"   76","line":"        try self.emitter.output_type(self.dep.base.rhs());","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   77","line":"        try self.writer.print(\"(*{f})(\", .{Canonical_Type_Fmt{ .type = self.dep.base }});","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   78","line":""},
{"lineNum":"   79","line":"        if (self.dep.base.lhs().* == .tuple_type) {","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   80","line":"            // Function pointer takes more than one argument"},
{"lineNum":"   81","line":"            const product = self.dep.base.lhs();","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   82","line":"            for (product.children().items, 0..) |term, i| {","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"   83","line":"                if (!term.is_c_void_type()) {","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   84","line":"                    // Do not output `void` parameters"},
{"lineNum":"   85","line":"                    try self.emitter.output_type(term);","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"   86","line":"                    if (i + 1 < product.children().items.len and !product.children().items[i + 1].is_c_void_type()) {","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"   87","line":"                        try self.writer.print(\", \", .{});","class":"lineNoCov","hits":"0","possible_hits":"4",},
{"lineNum":"   88","line":"                    }"},
{"lineNum":"   89","line":"                }"},
{"lineNum":"   90","line":"            }","class":"lineNoCov","hits":"0","possible_hits":"4",},
{"lineNum":"   91","line":"        } else {"},
{"lineNum":"   92","line":"            // Function pointer takes one argument"},
{"lineNum":"   93","line":"            if (!has_contexts or has_params) {","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"   94","line":"                try self.emitter.output_type(self.dep.base.lhs());","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"   95","line":"            }"},
{"lineNum":"   96","line":"        }"},
{"lineNum":"   97","line":""},
{"lineNum":"   98","line":"        if (has_contexts) {","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   99","line":"            if (has_params) {","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  100","line":"                try self.writer.print(\", \", .{});","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"  101","line":"            }"},
{"lineNum":"  102","line":"            for (self.dep.base.function.contexts.items, 0..) |ctx, i| {","class":"lineNoCov","hits":"0","possible_hits":"4",},
{"lineNum":"  103","line":"                try self.emitter.output_type(ctx);","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  104","line":"                if (i + 1 < self.dep.base.function.contexts.items.len) {","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  105","line":"                    try self.writer.print(\", \", .{});","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  106","line":"                }"},
{"lineNum":"  107","line":"            }","class":"lineNoCov","hits":"0","possible_hits":"5",},
{"lineNum":"  108","line":"        }"},
{"lineNum":"  109","line":"        try self.writer.print(\");\\n\\n\", .{});","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  110","line":"    } else if (self.dep.base.* == .struct_type or self.dep.base.* == .tuple_type or self.dep.base.* == .context_type) {","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  111","line":"        try self.writer.print(\"struct {f} {{\\n\", .{Canonical_Type_Fmt{ .type = self.dep.base }});","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  112","line":"        try self.output_field_list(self.dep.base.children(), 4);","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  113","line":"        try self.writer.print(\"}};\\n\\n\", .{});","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  114","line":"    } else if (self.dep.base.* == .array_of) {","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  115","line":"        try self.writer.print(\"struct {f} {{\\n    \", .{Canonical_Type_Fmt{ .type = self.dep.base }});","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  116","line":"        try self.emitter.output_type(self.dep.base.child());","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  117","line":"        try self.writer.print(\" _0[{}];\\n\", .{self.dep.base.array_of.len.int.data});","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  118","line":"        try self.writer.print(\"}};\\n\\n\", .{});","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  119","line":"    } else if (self.dep.base.* == .enum_type) {","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  120","line":"        try self.writer.print(\"struct {f} {{\\n    uint64_t tag;\\n\", .{Canonical_Type_Fmt{ .type = self.dep.base }});","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  121","line":"        if (!self.dep.base.enum_type.is_all_unit()) {","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  122","line":"            try self.writer.print(\"    union {{\\n\", .{});","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  123","line":"            try self.output_field_list(self.dep.base.children(), 8);","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  124","line":"            try self.writer.print(\"    }};\\n\", .{});","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  125","line":"        }"},
{"lineNum":"  126","line":"        try self.writer.print(\"}};\\n\\n\", .{});","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  127","line":"    } else if (self.dep.base.* == .untagged_sum_type) {","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  128","line":"        try self.writer.print(\"union {f} {{\\n\", .{Canonical_Type_Fmt{ .type = self.dep.base }});","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  129","line":"        if (!self.dep.base.child().expand_identifier().enum_type.is_all_unit()) {","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  130","line":"            try self.output_field_list(self.dep.base.children(), 4);","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  131","line":"        }"},
{"lineNum":"  132","line":"        try self.writer.print(\"}};\\n\\n\", .{});","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  133","line":"    } else if (self.dep.base.* == .dyn_type) {","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  134","line":"        const trait_symbol = self.dep.base.child().symbol().?;","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"  135","line":"        try self.writer.print(\"struct {f} {{\\n    void* data_ptr;\\n    const struct vtable_{s}__{s}__{}_{s}* vtable;\\n}};\\n\\n\", .{","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"  136","line":"            Canonical_Type_Fmt{ .type = self.dep.base },","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  137","line":"            trait_symbol.scope.module.?.package_name,","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"  138","line":"            trait_symbol.scope.module.?.name(),","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"  139","line":"            trait_symbol.scope.uid,","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  140","line":"            trait_symbol.name,","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  141","line":"        });"},
{"lineNum":"  142","line":"    } else {"},
{"lineNum":"  143","line":"        std.debug.panic(\"cannot output typedef for typekind {t}\", .{self.dep.base.*});","class":"lineNoCov","hits":"0","possible_hits":"7",},
{"lineNum":"  144","line":"    }"},
{"lineNum":"  145","line":"}"},
{"lineNum":"  146","line":""},
{"lineNum":"  147","line":"/// Outputs the fields of a structure or union type based on the provided list of AST types."},
{"lineNum":"  148","line":"fn output_field_list(self: *Self, fields: *const std.array_list.Managed(*Type_AST), spaces: usize) CodeGen_Error!void {","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  149","line":"    // output each field in the list"},
{"lineNum":"  150","line":"    for (fields.items, 0..) |term, i| {","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"  151","line":"        if (!term.is_c_void_type()) {","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  152","line":"            // Don\'t gen `void` structure/union fields"},
{"lineNum":"  153","line":"            for (0..spaces) |_| {","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"  154","line":"                try self.writer.print(\" \", .{});","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  155","line":"            }","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"  156","line":"            try self.emitter.output_type(term);","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  157","line":"            try self.writer.print(\" _{};\\n\", .{i});","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  158","line":"        }"},
{"lineNum":"  159","line":"    }","class":"lineNoCov","hits":"0","possible_hits":"4",},
{"lineNum":"  160","line":"}"},
]};
var percent_low = 25;var percent_high = 75;
var header = { "command" : "orng-test", "date" : "2025-11-10 15:43:08", "instrumented" : 86, "covered" : 0,};
var merged_data = [];
