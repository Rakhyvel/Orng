var data = {lines:[
{"lineNum":"    1","line":"const std = @import(\"std\");"},
{"lineNum":"    2","line":"const String = @import(\"../zig-string/zig-string.zig\").String;"},
{"lineNum":"    3","line":""},
{"lineNum":"    4","line":"const Self = @This();"},
{"lineNum":"    5","line":""},
{"lineNum":"    6","line":"pub const Span_Print_Error = error{OutOfMemory};"},
{"lineNum":"    7","line":""},
{"lineNum":"    8","line":"const Span_Format = struct {"},
{"lineNum":"    9","line":"    fmt_str: []const u8,"},
{"lineNum":"   10","line":"    sanitize: bool,"},
{"lineNum":"   11","line":"};"},
{"lineNum":"   12","line":""},
{"lineNum":"   13","line":"pub const c_format: Span_Format = .{"},
{"lineNum":"   14","line":"    .fmt_str = \"\\\"{s}:{}:{}:\\\\n{s}\\\\n{s}^\\\"\","},
{"lineNum":"   15","line":"    .sanitize = true,"},
{"lineNum":"   16","line":"};"},
{"lineNum":"   17","line":""},
{"lineNum":"   18","line":"pub const interpreter_format: Span_Format = .{"},
{"lineNum":"   19","line":"    .fmt_str = \"{s}:{}:{}:\\n{s}\\n{s}^\\n\","},
{"lineNum":"   20","line":"    .sanitize = false,"},
{"lineNum":"   21","line":"};"},
{"lineNum":"   22","line":""},
{"lineNum":"   23","line":"pub const phony = Self{ .filename = \"\", .line_text = \"\", .line_number = 0, .col = 0 };"},
{"lineNum":"   24","line":""},
{"lineNum":"   25","line":"filename: []const u8,"},
{"lineNum":"   26","line":"line_text: []const u8, // The entire gosh-darn line from the source file text that this span originates"},
{"lineNum":"   27","line":"line_number: usize,"},
{"lineNum":"   28","line":"col: usize,"},
{"lineNum":"   29","line":""},
{"lineNum":"   30","line":"/// Prints out a line string, with quotes and arrow."},
{"lineNum":"   31","line":"pub fn print_debug_line(self: *const Self, writer: *std.array_list.Managed(u8), comptime span_format: Span_Format) Span_Print_Error!void {","class":"linePartCov","hits":"2","order":"4648","possible_hits":"4",},
{"lineNum":"   32","line":"    var spaces = String.init_with_contents(std.heap.page_allocator, \"\") catch unreachable;","class":"linePartCov","hits":"2","order":"4649","possible_hits":"4",},
{"lineNum":"   33","line":"    defer spaces.deinit();","class":"linePartCov","hits":"1","order":"4672","possible_hits":"4",},
{"lineNum":"   34","line":""},
{"lineNum":"   35","line":"    if (self.col > 0) {","class":"linePartCov","hits":"2","order":"4650","possible_hits":"4",},
{"lineNum":"   36","line":"        for (1..self.col -| 1) |_| {","class":"linePartCov","hits":"2","order":"4651","possible_hits":"6",},
{"lineNum":"   37","line":"            spaces.insert(\" \", spaces.size) catch unreachable;","class":"linePartCov","hits":"2","order":"4652","possible_hits":"4",},
{"lineNum":"   38","line":"        }","class":"linePartCov","hits":"4","order":"4659","possible_hits":"10",},
{"lineNum":"   39","line":"    }"},
{"lineNum":"   40","line":""},
{"lineNum":"   41","line":"    const sanitized_filename = if (span_format.sanitize)"},
{"lineNum":"   42","line":"        sanitize_string(self.filename, std.heap.page_allocator)","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   43","line":"    else"},
{"lineNum":"   44","line":"        self.filename;","class":"lineCov","hits":"1","order":"4664","possible_hits":"1",},
{"lineNum":"   45","line":""},
{"lineNum":"   46","line":"    const text_to_write = if (span_format.sanitize)"},
{"lineNum":"   47","line":"        sanitize_string(self.line_text, std.heap.page_allocator)","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   48","line":"    else"},
{"lineNum":"   49","line":"        self.line_text;","class":"lineCov","hits":"1","order":"4665","possible_hits":"1",},
{"lineNum":"   50","line":""},
{"lineNum":"   51","line":"    try writer.print(span_format.fmt_str, .{","class":"linePartCov","hits":"2","order":"4666","possible_hits":"6",},
{"lineNum":"   52","line":"        sanitized_filename,"},
{"lineNum":"   53","line":"        self.line_number,","class":"linePartCov","hits":"1","order":"4667","possible_hits":"2",},
{"lineNum":"   54","line":"        self.col,","class":"linePartCov","hits":"1","order":"4668","possible_hits":"2",},
{"lineNum":"   55","line":"        text_to_write,"},
{"lineNum":"   56","line":"        spaces.str(),","class":"linePartCov","hits":"1","order":"4669","possible_hits":"2",},
{"lineNum":"   57","line":"    });"},
{"lineNum":"   58","line":"}"},
{"lineNum":"   59","line":""},
{"lineNum":"   60","line":"pub fn pprint(self: Self, allocator: std.mem.Allocator) ![]const u8 {"},
{"lineNum":"   61","line":"    var out = std.array_list.Managed(u8).init(allocator);"},
{"lineNum":"   62","line":"    defer out.deinit();"},
{"lineNum":"   63","line":""},
{"lineNum":"   64","line":"    // TODO: Generic pprinter that makes the arena and string and passes the writer to a pprint method"},
{"lineNum":"   65","line":"    try out.print(\"{s}:{}:{}\", .{ self.filename, self.line_number, self.col });"},
{"lineNum":"   66","line":""},
{"lineNum":"   67","line":"    return out.toOwnedSlice();"},
{"lineNum":"   68","line":"}"},
{"lineNum":"   69","line":""},
{"lineNum":"   70","line":"pub fn format(self: Self, writer: *std.io.Writer) !void {"},
{"lineNum":"   71","line":"    var arena = std.heap.ArenaAllocator.init(std.heap.page_allocator);"},
{"lineNum":"   72","line":"    defer arena.deinit();"},
{"lineNum":"   73","line":""},
{"lineNum":"   74","line":"    const out = self.pprint(arena.allocator()) catch unreachable;"},
{"lineNum":"   75","line":""},
{"lineNum":"   76","line":"    try writer.print(\"{s}\", .{out});"},
{"lineNum":"   77","line":"}"},
{"lineNum":"   78","line":""},
{"lineNum":"   79","line":"/// Sanitizes a string, escaping proper characters."},
{"lineNum":"   80","line":"///"},
{"lineNum":"   81","line":"/// This is needed so that string escapes in Orange do not escape in the generate C source."},
{"lineNum":"   82","line":"///"},
{"lineNum":"   83","line":"/// For example:"},
{"lineNum":"   84","line":"///     let str = some_function(\"You better \\n sanitize me!\")"},
{"lineNum":"   85","line":"///"},
{"lineNum":"   86","line":"/// Would produce an error diagnostic in debug mode, which needs to escape the `\\` correctly so"},
{"lineNum":"   87","line":"/// that the error shown to the user is identical to the text in the file."},
{"lineNum":"   88","line":"fn sanitize_string(str: []const u8, allocator: std.mem.Allocator) []const u8 {","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"   89","line":"    var builder = String.init_with_contents(allocator, \"\") catch unreachable;","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"   90","line":"    for (str) |byte| {","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"   91","line":"        if (byte == \'\\\\\' or byte == \'\"\') {","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"   92","line":"            builder.insert(\"\\\\\", builder.len()) catch unreachable;","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   93","line":"        }"},
{"lineNum":"   94","line":"        if (byte == \'\\r\') {","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   95","line":"            builder.insert(\"\\\\r\", builder.len()) catch unreachable;","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"   96","line":"        } else if (byte == \'\\n\') {","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   97","line":"            builder.insert(\"\\\\n\", builder.len()) catch unreachable;","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"   98","line":"        } else {"},
{"lineNum":"   99","line":"            const insert_me: [1]u8 = .{byte};","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  100","line":"            builder.insert(&insert_me, builder.len()) catch unreachable;","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"  101","line":"        }"},
{"lineNum":"  102","line":"    }","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"  103","line":"    return (builder.toOwned() catch unreachable).?;","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"  104","line":"}"},
]};
var percent_low = 25;var percent_high = 75;
var header = { "command" : "orng-test", "date" : "2025-11-10 15:43:08", "instrumented" : 28, "covered" : 13,};
var merged_data = [];
